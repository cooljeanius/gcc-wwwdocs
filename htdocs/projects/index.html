<html>

<head>
<title>GCC Projects</title>
</head>

<body>

<!-- table of contents start -->
<h1><a name="toc">Table of Contents</a></h1>
<ul>
<li><a href="#fix_bugs_in_bts">Fix bugs in our bug tracking system</a></li>
<li><a href="#beginner_gcc_hackers">Projects for beginner GCC hackers</a></li>
<li><a href="#c_preprocessor">Projects for the C preprocessor</a></li>
<li><a href="#gcc_web_pages">Projects for the GCC web pages</a></li>
<li><a href="#documentation_projects">Projects for improving the GCC documentation</a></li>
<li><a href="#development_branches">Development Branches</a></li>
<li><a href="#optimizer_inadequacies">Optimizer inadequacies</a></li>
<li><a href="#c_front_end">Projects for improving the C front end:</a>
<ul>
<li><a href="#improve_wconversion">Improve <code>-Wconversion</code></a></li>
<li><a href="#more_warnings">Add more warnings</a></li>
<li><a href="#c99_support">Changes to support C99 standard</a></li>
<li><a href="#implement_various_builtin_functions_for_isoc99">Implement various builtin functions for ISO C99's 
<code>&lt;tgmath.h&gt;</code></a></li>
<li><a href="#format_checking">Format (<code>printf</code>, <code>scanf</code> and
<code>strftime</code>) checking:</a></li>
</ul></li>
<li><a href="#improve_the_installation_procedure">Improve the installation procedure</a></li>
<li><a href="#simpler_porting">Simpler porting</a></li>
<li><a href="#other_languages">Other languages</a></li>
<li><a href="#generalize_the_machine_model">Generalize the machine model</a></li>
<li><a href="#the_old_problems_file">The old PROBLEMS file</a></li>
</ul>
<!-- table of contents end -->


<h1>GCC Projects</h1>

<p>Remember to <a href="../contributewhy.html">keep other developers
informed</a> of any substantial projects you intend to work on.</p>

<h2><a name="fix_bugs_in_bts">Fix bugs in our bug tracking system</a></h2>
<p>You can investigate bugs in our <a href="http://gcc.gnu.org/bugzilla/">bug
tracking system</a> and attempt to fix them or see whether they still are
present in current GCC.</p>

<h2><a name="beginner_gcc_hackers">Projects for beginner GCC hackers</a></h2>
<p>If you are new to GCC, start with our <a
href="beginner.html">projects for beginners</a>.</p>

<h2><a name="c_preprocessor">Projects for the C preprocessor</a></h2>
<p>There is a separate project list for the <a
href="cpplib.html">C preprocessor</a>.</p>

<h2><a name="gcc_web_pages">Projects for the GCC web pages</a></h2>
<p>There is a separate projects list for the <a href="web.html">web
pages</a>.</p>

<h2><a name="documentation_projects">Projects for improving the GCC documentation</a></h2>
<p>There is a separate projects list for <a
href="documentation.html">projects for improving the GCC documentation</a>.</p>

<h2><a name="development_branches">Development Branches</a></h2>
<p>There are several <a href="../cvs.html#devbranches">development branches</a>
pursuing various goals.</p>

<h2><a name="optimizer_inadequacies">Optimizer inadequacies</a></h2>
<p>We also have a page detailing <a href="optimize.html">optimizer
inadequacies</a>, if you'd prefer to think about it in terms of problems
instead of features.</p>

<h2><a name="c_front_end">Projects for the C front end</a></h2>

<p>The following are some ideas for C front-end projects to work on.</p>

<h3><a name="improve_wconversion">Improve <code>-Wconversion</code></a></h3>
<p>Improve <code>-Wconversion</code> so that it can be used for
security auditing as well as for its original intended purpose of
helping with converting old code to ISO C.</p>

<h3><a name="more_warnings">More warnings</a></h3>
<p>Warn about statements that are undefined because the order of
evaluation of increment operators makes a big difference.  Here is an
example:</p>
<pre>
*foo++ = hack (*foo);
</pre>
<p><code>-Wsequence-point</code> does some of this, but not that
particular case.</p>

<h3><a name="c99_support">Changes to support C99 standard</a></h3>
<p>The new version of the C standard (ISO/IEC 9899:1999) requires a
number of library changes; these have to be provided by the C library,
and not by gcc.  In addition, there are also changes to the language
proper, and some compiler support is needed for the new library
features.  An <a href="../c99status.html">overview</a> of the C99
implementation status is available.</p>

<h3><a name="implement_various_builtin_functions_for_isoc99">Implement various builtin functions for ISO C99's 
<code>&lt;tgmath.h&gt;</code></a></h3> 
<p>Design and implement builtin functions that assist in implementing
the ISO C99 <code>&lt;tgmath.h&gt;</code> macros.  These builtins
could be along the general lines of the macros used in glibc 2.2 (for
example, the implementation of <code>&lt;tgmath.h&gt;</code> might use
<code>__builtin_tgmath_unary_real_only (value, log2f, log2,
log2l)</code> to implement the <code>log2</code> macro), but should be
designed so that, if the Annex G imaginary types are implemented in
GCC, glibc does not need to change again to allow for them.  This
means additional functions, beyond those corresponding to the macros
in glibc, are needed to handle the trigonometric functions which G.7
specifies have real or imaginary result type for imaginary arguments,
but which have complex result type for complex arguments.  The design
for these builtins should be discussed with the gcc and libc-alpha
lists.</p>

<h3><a name="format_checking">Format (<code>printf</code>,
<code>scanf</code> and <code>strftime</code>) checking:</a></h3>

<ul>
  <li>Make re-entrant: eliminate global state used for <code>$</code>
  format checking.</li>

  <li><code>strftime</code>: warnings for use of <code>0</code>,
  <code>-</code> or <code>_</code> flags without width on formats where
  inappropriate.  Similar warnings where use of one format feature is
  useless unless another one is also used also apply for
  <code>printf</code> formats (<code>0</code> and <code>-</code> flags
  when no width is specified and so there is no padding) and for
  <code>strfmon</code> formats.</li>

  <li>Integer <code>printf</code> formats: warn for integer constant
  argument out of range of unpromoted type (including signed/unsigned
  where it doesn't fit in range).</li>

  <li>Fix detection of whether format strings are narrow or wide on
  targets where <code>wchar_t</code> is <code>char</code>.  This may
  require changes elsewhere in the compiler to mark string constants
  with this information.</li>

  <li>Include an option to warn for format extensions that have been
  obsoleted by standard C99 features.</li>

  <li>Meaning of "quad" and <code>%q</code>: anything more accurate than
  <code>long long</code>?  See messages <a
  href="http://gcc.gnu.org/ml/gcc-bugs/1999-02n/msg00164.html">1</a> and
  <a href="http://gcc.gnu.org/ml/gcc-bugs/2000-08/msg00272.html">2</a>
  about this to gcc-bugs.  (Note that <code>%q</code> is now largely
  obsolete given the new C99 formats and macros.)</li>

  <li>Wide string format support.  See a <a
  href="http://gcc.gnu.org/ml/gcc/2000-12/msg00170.html">message
  soliciting views on the user interface to this</a> and send any views
  on this to the <code>gcc</code> mailing list.</li>

  <li>Clean up how <code>format.exp</code> handles
  <code>TORTURE_OPTIONS</code>, by making changes elsewhere in the test
  harness so that <code>TORTURE_OPTIONS</code> is initialized for each
  <code>dg-init</code> rather than just once and so needing saving and
  restoring.</li>

  <li>When a <code>format</code> or <code>format_arg</code> attribute is
  applied to a function with a non-prototype declaration, and the
  function is later redeclared with a prototype or defined, the
  attribute should be checked again to see if it makes sense given the
  argument types of the function.  Similarly, these checks should be
  made if the original attribute is on an old-style function
  definition.</li>

  <li>Implement more checks related to <code>__attribute__((__nonnull__))</code>,
  such as for functions such as <code>execle</code> that require
  <code>NULL</code>-terminated argument lists.</li>

  <li>Possible security warnings under <code>-Wformat-security</code>:

  <ul>
    <li>Warn for <code>sprintf</code> into fixed length buffer if the
    output can't be proved not to overrun.  Similarly for
    <code>scanf</code> <code>%s</code> and <code>%[...]</code> without
    width to fixed length buffer (or possibly to any buffer); or
    <code>%s</code>, <code>%[...]</code> and <code>%c</code> with width
    to too short a buffer, including <code>%lc</code>, <code>%ls</code>
    and <code>%l[...]</code>.</li>
  </ul>

  </li>

  <li>(Maybe eventually:) Extensible format checking: allow programs
  such as OS kernels and parts of GCC to tell GCC about additional
  format conversion characters recognised by their format
  functions.</li>

  <li><code>fopen</code>, <code>freopen</code>: warning for the
  incorrect format of the mode parameter, see <a 
  href="http://gcc.gnu.org/ml/gcc-bugs/2001-12/msg00649.html">PR
  c/5127</a>.  Some ideas for how to implement such a warning
  were discussed <a 
  href="http://gcc.gnu.org/ml/gcc-bugs/2001-12/msg00651.html">here</a>.
  </li>
</ul>


<h2><a name="improve_the_installation_procedure">Improve the installation procedure</a></h2>

<ul>
  <li>See <a href="http://gcc.gnu.org/ml/gcc/2000-11/msg00556.html">a
  message from Zack Weinberg</a>, and follow-ups to it, for some
  discussion of some of these ideas.</li>

  <li>Move the installation from incomprehensible shell scripts in the
  Makefiles to more comprehensible shell scripts outside the Makefiles.</li>

  <li>When installing as root, make the installed headers in
  <code>$(libsubdir)</code> be owned by root rather than the user who
  did the build.</li>

  <li>Be consistent about what programs get links such as
  <code>i686-pc-linux-gnu-gcc</code> and
  <code>i686-pc-linux-gnu-gcc-3.4.1</code>.  Any program embedding
  architecture or version dependencies may need such links.</li>

  <li>Add a configure option <code>--enable-cc-links</code> or similar
  which causes links to the compiler driver or shell scripts to be
  installed under names <code>cc</code> (the traditional Unix compiler
  name and a legacy utility in Unix98, accepting an unspecified C
  language variant), <code>c89</code> (POSIX; a script running <code>gcc
  -std=c89 -pedantic</code>) and <code>c99</code> (the Austin Group
  revision of POSIX; a script running <code>gcc -std=c99
  -pedantic</code>) for systems such as GNU/Linux where GCC is the
  system compiler.</li>

  <li>Fix the issues discussed in <a
  href="http://gcc.gnu.org/PR346">PR other/346</a>.</li>
</ul>

<hr />
<h2><a name="simpler_porting">Simpler porting</a></h2>

<p>Right now, describing the target machine's instructions is done
cleanly, but describing its addressing mode is done with several
ad-hoc macro definitions.  Porting would be much easier if there were
an RTL description for addressing modes like that for instructions.
Tools analogous to genflags and genrecog would generate macros from
this description.</p>

<p>There would be one pattern in the address-description file for each
kind of addressing, and this pattern would have:</p>

<ul>
  <li>the RTL expression for the address</li>
  <li>C code to verify its validity (since that may depend on
      the exact data).</li>
  <li>C code to print the address in assembly language.</li>
  <li>C code to convert the address into a valid one, if it is not valid.
      (This would replace LEGITIMIZE_ADDRESS).</li>
  <li>Register constraints for all indeterminates that appear
      in the RTL expression.</li>
</ul>

<h2><a name="other_languages">Other languages</a></h2>

<p>We currently have front ends for Ada, C, C++, Objective C, 
Fortran, and Java.  A Pascal front end exists but has not yet
been integrated.</p>

<p>Cobol and Modula-2 front ends might be useful, and are being worked
on.</p>

<h2><a name="generalize_the_machine_model">Generalize the machine model</a></h2>

<p>Some new compiler features may be needed to do a good job on
machines where static data needs to be addressed using base registers.</p>

<p>Some machines have two stacks in different areas of memory, one
used for scalars and another for large objects.  The compiler does not
now have a way to understand this.</p>

<p>The scheduler does not do very well on recent RISC machines.  Haifa
helps but not enough.</p>

<hr />

<h2><a name="the_old_problems_file">The old PROBLEMS file</a></h2>

<p>The following used to be in a file <code>PROBLEMS</code> in the GCC
 distribution.  Probably much of it is no longer relevant as of GCC 3.0
(the file hadn't changed since GCC 2.0), but some might be.  Someone
should go through it, identifying what is and isn't relevant, adding
anything applicable to current GCC (and describing a bug) to our
<a href="../bugs.html">bug-tracking system</a> and sending patches to
gcc-patches to remove such analysed entries from the list.</p>

<ol>
  <li value="110">Possible special combination pattern: If the two
  operands to a comparison die there and both come from insns that are
  identical except for replacing one operand with the other, throw away
  those insns.  Ok if insns being discarded are known 1 to 1.  An andl
  #1 after a seq is 1 to 1, but how should compiler know that?</li>

  <li value="117">Any number of slow zero-extensions in one loop, that
  have their clr insns moved out of the loop, can share one register if
  their original life spans are disjoint.  But it may be hard to be sure
  of this since the life span data that regscan produces may be hard to
  interpret validly or may be incorrect after cse.</li>

  <li value="118">In cse, when a bfext insn refers to a register, if the
  field corresponds to a halfword or a byte and the register is
  equivalent to a memory location, it would be possible to detect this
  and replace it with a simple memory reference.</li>
</ol>

</body>
</html>
