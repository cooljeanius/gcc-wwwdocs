<html>

<head>
<title>Branching for a GCC Release</title>
</head>

<body>
<p>This page documents the procedure for making a new release branch.</p>

<ol>
<li>Execute the following commands, substituting appropriate version 
numbers:
<blockquote>
<pre>
cvs rtag gcc-3_5-branchpoint gcc
cvs rtag -b -r gcc-3_5-branchpoint gcc-3_5-branch gcc
</pre>
</blockquote>
</li>

<li>Update <code>cvs.html</code> web page to list the new branch tags.</li>

<li>Update the file <code>gcc/version.c</code> on the branch, to say
&quot;prerelease&quot; instead of &quot;experimental&quot;.</li>

<li>Update the file <code>gcc/version.c</code> on the mainline, to use
the next major release number (e.g., 3.2 instead of 3.1).</li>

<li>Update <code>doc/include/gcc-common.texi</code> on the mainline to 
use the next major release number.</li>

<li>Create a new <code>htdocs/gcc-<var>VERSION</var></code> directory
for the next major release in the <code>wwwdocs</code> repository and
populate it with initial copies of <code>changes.html</code> and
<code>criteria.html</code>.</li>

<li>Add <code>index.html</code> and <code>buildstat.html</code> pages
to the directory corresponding to the newly created release branch.
Update the toplevel <code>buildstat.html</code> accordingly.</li>

<li>Update the <code>index.html</code> web page to show the new active
release branch, the current release series, and active development
(mainline).  Update the version and development stage for mainline.</li>

<li>Update <code>doc/include/gcc-common.texi</code> on the branch to use
<code>@clear DEVELOPMENT</code>.</li>

<li>Update <code>maintainer-scripts/gcc_release</code> on the
mainline, where it says &quot;# For now snapshots come from the
mainline.&quot;, to make snapshots come from the branch instead.
Also update the description of where snapshots come from in
<code>maintainer-scripts/snapshot-README</code>.
(Also, <code>cvs update</code> will also need to be run in the scripts
directory in the <code>gccadmin</code> account, to update the version
actually called from cron.)</li>

<li><a href="translation.html#regen">Regenerate
<code>gcc.pot</code></a> and <code>cpplib.pot</code>.
<a href="http://gcc.gnu.org/translation.html#submit">Send them
to the translation project</a>.</li>

<li>Update the file <code>gcc/configure.in</code> so that
<code>--disable-checking</code> is the default.</li>

<li>For branches of GCC 3.4 or later, update the file
<code>gcc/configure.in</code> so that <code>--disable-werror</code> is
the default.</li>

<li>Create new versions in Bugzilla corresponding to the new mainline 
version.  This can be accomplished by choosing products, choosing gcc, 
and editing the versions.  Please do <strong>not</strong> delete old
versions.</li>

<li>Create new target milestones in Bugzilla corresponding to the new 
mainline version.  This can be accomplished by choosing products, 
choosing gcc, and editing the milestones.  Please do <strong>not</strong>
delete old target milestones.</li>

<li>Create new target milestones in Bugzilla for the second dot
release on the branch.  For example, when branching 3.4, create a
milestone for 3.4.1 for PRs that can't be fixed in time for 3.4.0.</li>

<li>Update the email parsing script to handle bugs against the new versions.
The script is in CVS at <code>wwwdocs/bugzilla/contrib/bug_email.pl</code>. 
Search for an existing version (like "3.3"), and update both places
it occurs to handle the new version through copy and paste.</li>

</ol>

</body>
</html>
