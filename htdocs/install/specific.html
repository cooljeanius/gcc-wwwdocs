<html>
<head>
<title>Host/Target specific installation notes for egcs</title>
</head>
<body>
<h1 align="center">Host/Target specific installation notes for egcs</h1>

<p><b>i?86-*-linux*</b><br>
You will need binutils-2.9.1.0.15 or newer for exception handling to work.

<p><b>i?86-*-sco3.2v5*</b><br> 

If you are building languages other than C, you must follow the instructions
about invoking `<code>make bootstrap</code>' because the native OpenServer
compiler will build a <code>cc1plus</code> that will not correctly parse many
valid C++ programs including those in libgcc.a.  <b>You must do a `<code>make 
bootstrap</code>' if you are building with the native compiler.</b><p>

Use of the `<code>-march-pentiumpro</code>' flag can result in
unrecognized opcodes when using the native assembler.  While
it's rather rare to see these emitted by GCC yet, errors of the basic form:
<pre>
/usr/tmp/ccaNlqBc.s:22:unknown instruction: fcomip
/usr/tmp/ccaNlqBc.s:50:unknown instruction: fucomip
</pre>
are symptoms of this problem.   You may work around this by not 
building affected files with that flag or by using the GNU assembler.   
Users of GNU assembler should see the note below for hazards on doing so.

If you choose to configure with <code>--enable-shared</code> you should also
specificy <code>--with-gnu-as --disable-multilib</code> even if you are not
using the GNU assembler.   In doing so you will give up the ability
to generate COFF executables as described below.   This combination 
of flags is necessary to suppress negative interactions with multilibing.

<p>The native SCO assembler that is provided with the OS at no charge
is normally required.  If, however, you must be able to use the GNU
assembler you may configure this package using the flags <code>--with-gnu-as</code>.  
You must use a recent version of GNU binutils; version 2.9.1 seems to work well.
If you select this option, you will be unable to reliably build COFF
images.  In general, the <code>--with-gnu-as</code> option isn't as well tested as
the native assembler.

<p>Unlike various prereleases of GCC that used <code>-belf</code> and 
defaulted to COFF, you must now use the <code>-melf</code> and 
<code>-mcoff</code> flags to toggle between the two object file formats.     
ELF is now the default.

<p>Look in gcc/config/i386/sco5.h (search for "messy") for additional
OpenServer-specific flags.

<p>Systems based on OpenServer before 5.0.4 (`<code>uname -X</code>' will
tell you what you're running) require TLS597 from ftp.sco.com/TLS for
C++ constructors and destructors to work right.

<p>The system linker in (at least) 5.0.4 and 5.0.5 will sometimes
do the wrong thing for a construct that egcs will emit for PIC
code.  This can be seen as execution testsuite failures when using
-fPIC on 921215-1.c, 931002-1.c, nestfunc-1.c, and gcov-1.c.
For 5.0.5, an updated linker that will cure this problem is
available.  You must install  both 
	<a href="ftp://ftp.sco.com/Supplements/rs505a/">
	ftp://ftp.sco.com/Supplements/rs505a/
	</a>
and
	<a href="ftp://ftp.sco.com/SLS/">
	OSS499A
	</a>.
	

<p><b>i?86-*-udk</b><br> 

This target emulates the SCO Universal Development Kit and requires that
package be installed.  (If it is installed, you will have a <code>/udk/usr/ccs/bin/cc </code>file present.)  It's very much like the i?86-*-unixware7* target
but is meant to be used when hosting on a system where UDK isn't the
default compiler such as OpenServer 5 or Unixware 2.  This target will
generate binaries that will run on OpenServer, Unixware 2, or Unixware 7, 
with the same warnings and caveats as the SCO UDK.

<p>You can stage1 with either your native compiler or with UDK.   If you
don't do a full bootstrap when initially building with your native compiler
you will have an utterly unusable pile of bits as your reward.

<p>This target is a little tricky to build because we have to distinguish
it from the native tools (so it gets headers, startups, and libraries
from the right place) while making the tools not think we're actually 
building a cross compiler.   The easiest way to do this is with a configure
command like this:

<p>
<code>
CC=/udk/usr/ccs/bin/cc <i>/your/path/to/</i>egcs/configure
--host=i686-pc-udk --target=i686-pc-udk --exec-prefix=udk-
</code>
<i>You should substitute 'i686' in the above command with the appropriate
processor for your host.</i>

<p> You should follow this with a `<code>make bootstrap</code>'  then
`<code>make install</code>'.  You can then access the UDK-targeted EGCS 
tools by adding
<code>udk-</code> before the commonly known name.  For example, to invoke the C
compiler, you would use `<code>udk-gcc</code>'.  They will coexist peacefully with
any native-target EGCS tools you may have installed.

<p><b>hppa*-hp-hpux*</b><br>
We <b>highly</b> recommend using gas/binutils-2.8 or newer on all hppa
platforms; you may encounter a variety of problems when using the HP assembler.

<p><b>hppa*-hp-hpux9</b><br>
The HP assembler has major problems on this platform.  We've tried to work
around the worst of the problems.  However, those workarounds may be causing
linker crashes in some circumstances; the workarounds also probably prevent
shared libraries from working.  Use the GNU assembler to avoid these problems.

<br>The configuration scripts for egcs will also trigger a bug in the hpux9
shell.  To avoid this problem set CONFIG_SHELL to /bin/ksh and SHELL to
/bin/ksh in your environment.

<p><b>hppa*-hp-hpux10</b><br>
For hpux10.20, we <b>highly</b> recommend you pick up the latest sed
patch from HP.  HP has two sites which provide patches free of charge.

<br><a href="http://us-support.external.hp.com">US, Canada, Asia-Pacific, and
Latin-America</a>
<br><a href="http://europe-support.external.hp.com">Europe</a>

<p>Retrieve patch PHCO_15468.

<p>The HP assembler on these systems is much better than the hpux9 assembler,
but still has some problems.  Most notably the assembler inserts timestamps
into each object file it creates, causing the 3-stage comparison test to fail
during a `<code>make bootstrap</code>'.  You should be able to continue by 
saying `<code>make all</code>' after getting the failure from `<code>make 
bootstrap</code>'.

<p><b>m68k-*-nextstep*</b><br>

<p>You absolutely must use GNU sed and GNU make on this platform.  

<p>On NEXTSTEP 3.x where x &lt; 3 the build of egcs will abort during  
stage1 with an error message like this:

<pre>
_eh
/usr/tmp/ccbbsZ0U.s:987:Unknown pseudo-op: .section
/usr/tmp/ccbbsZ0U.s:987:Rest of line ignored. 1st junk character  
valued 95 (_).
</pre>

<p>The reason for this is the fact that NeXT's assembler for these  
versions of the operating system does not support the .section  
pseudo op that's needed for full C++ exception functionality.

<p>As NeXT's assembler is a derived work from GNU as, a free  
replacement that does can be obtained at 
<a href="ftp://ftp.next.peak.org:/next-ftp/next/apps/devtools/as.3.3.NIHS.s.tar.gz">ftp://ftp.next.peak.org:/next-ftp/next/apps/devtools/as.3.3.NIHS.s.tar.gz</a>.

<p>If you try to build the integrated C++ & C++ runtime libraries on this system
you will run into trouble with include files.  The way to get around this is
to use the following sequence.  Note you must have write permission to
<i>prefix</i> for this sequence to work.
<code>
<p>cd <i>objdir</i><br>
make all-texinfo all-bison all-byacc all-binutils all-gas all-ld<br>
cd gcc<br>
make bootstrap<br>
make install-headers-tar<br>
cd ..<br>
make bootstrap3<br>
</code>

<p><b>m68k-sun-sunos4.1.1</b><br>
It is reported that you may need the GNU assembler on this platform.

<p><b>mips*-sgi-irix4</b><br>
<b>mips*-sgi-irix5</b><br>
You must use GAS on these platforms, the native assembler can not handle the
code for exception handling support on this platform.

<p>These systems don't have ranlib, which various components in egcs need; you
should be able to avoid this problem by installing GNU binutils, which includes
a functional ranlib for this system.

<p>You may get the following warning on irix4 platforms, it can be safely
ignored.
<pre>
    warning: foo.o does not have gp tables for all its sections.
</pre>

<p><b>mips*-sgi-irix6</b><br>
You must not use GAS on irix6 platforms; doing so will only cause problems.

<p>These systems don't have ranlib, which various components in egcs need; you
should be able to avoid this problem by making a dummy script called ranlib
which just exits with zero status and placing it in your path.

<p><b>rs6000-ibm-aix*</b><br>
<b>powerpc-ibm-aix*</b><br>
AIX Make frequently has problems with egcs makefiles.  GNU Make 3.76 or
newer is recommended to build on this platform.

<p>Binutils does not support AIX 4.3 (at least through release 2.9).
GNU as and GNU ld will not work properly and one should not configure egcs
to use those GNU utilities.  Use the native AIX tools which do interoperate
with egcs.

<p><b>powerpc-*-linux-gnu*</b><br>
You will need 
<a href="ftp://ftp.varesearch.com/pub/support/hjl/binutils">binutils-2.9.1.0.23</a> or
newer for a working gcc/egcs. It is strongly recommended to recompile binutils
if you initially built it with gcc-2.7.2.x.

<p><b>sparc-sun-solaris2.7</b><br>
<p>Sun patch 107058-01 (1999-01-13) for SPARC Solaris 7 triggers a bug in
the dynamic linker.  This problem (Sun bug 4210064) affects GCC 2.8
and later, including all EGCS releases.  To avoid this problem, do not
install Sun patch 107058-01 until after Sun releases a patch for bug
4210064.  Sun has a fix for this bug but (as of 1999-06-24) has not
yet released it as a patch.


<p><b>sparc-unknown-linux-gnulibc1</b><br>
It has been reported that you might need 
<a href="ftp://ftp.yggdrasil.com/private/hjl">binutils-2.8.1.0.23</a>
for this platform too.

<p><b>sparc64-*-*</b><br>
GCC version 2.95 is not able to compile code correctly for <code>sparc64</code>
targets.  Users of the Linux kernel, at least, can use the <code>sparc32</code>
program to start up a new shell invocation with an environment that causes
<code>configure</code> to recognize (via <code>uname -a</code>) the
system as <code>sparc-*-*</code> instead.

<hr>
<i>Last modified on July 6, 1999.</i>

</body>
</html>
