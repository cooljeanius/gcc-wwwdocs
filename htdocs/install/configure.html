<html>
<head>
<title>Installing GCC: Configuration</title>
</head>
<body>
<h1 align="center">Installing GCC: Configuration</h1>

<p>Like most GNU software, GCC must be configured before it can be built.
This document describes the recommended configuration procedure
for both native and cross targets.

<p>We use <i>srcdir</i> to refer to the toplevel source directory for
GCC; we use <i>objdir</i> to refer to the toplevel build/object
directory.

<p>First, we <b>highly</b> recommend that GCC be built into a
separate directory than the sources which does <b>not</b> reside
within the source tree.  This is how we generally build GCC; building
where <i>srcdir</i> == <i>objdir</i> should still work, but doesn't
get extensive testing; building where <i>objdir</i> is a subdirectory
of <i>srcdir</i> is unsupported.

<p>Second, when configuring a native system, either "cc" or "gcc" must be in
your path or you must set CC in your environment before running configure.
Otherwise the configuration scripts may fail.

<p>To configure GCC:

<blockquote>
<code>
  <br>% mkdir <i>objdir</i>
  <br>% cd <i>objdir</i>
  <br>% <i>srcdir</i>/configure <b>[target]</b> <b>[options]</b>
</code>
</blockquote>


<p><b>target specification</b>
<ul>
  <li>GCC has code to correctly determine the correct value for
  <b>target</b> for nearly all native systems.  Therefore, we highly
  recommend you not provide a configure target when configuring a
  native compiler.</li>

  <li> <b>target</b> must be specified as <code>--target=</code><i>target</i>
  when configuring a cross compiler;
  examples of valid targets would be i960-rtems, m68k-coff, sh-elf, etc.</li>

  <li>Specifying just <b>target</b> instead of <code>--target=</code><i>target</i>
  implies that the host defaults to <b>target</b>.</li>
</ul>


<p><b> options specification</b>

<p>Use <b>options</b> to override several configure time options for
GCC.  A partial list of supported <tt>options</tt>:

<ul>
  <li> <code>--prefix=</code><i>dirname</i> -- Specify the toplevel installation
  directory.  This is the recommended way to install the tools into a directory
  other than the default.  The toplevel installation directory defaults to
  <tt>/usr/local</tt>.

  <p> We <b>highly</b> recommend against <i>dirname</i> being the same or a
  subdirectory of <i>objdir</i> or vice versa.

  <p>These additional options control where certain parts of the distribution
  are installed.  Normally you should not need to use these options.
  <ul>
     <li> <code>--with-local-prefix=</code><i>dirname</i> -- Specify the installation
     directory for local include files.  The default is <tt>/usr/local</tt>.</li>

     <li> <code>--with-gxx-include-dir=</code><i>dirname</i> -- Specify the installation
     directory for g++ header files.  The default is <tt>/usr/local/include/g++</tt>.</li>
  </ul>
  </li>

  <li> <code>--enable-shared</code> -- Build shared versions of the C++ runtime
  libraries if supported. This is the default on most systems. Use
  <code>--disable-shared</code> for static libraries. Note that up to
  the gcc version 2.95.x series, static libraries were the default on
  all systems.</li>

  <li> <code>--with-gnu-as</code> -- Specify that the compiler should
  assume that the assembler it finds is the GNU assembler. However,
  this does not modify the rules to find an assembler and will result
  in confusion if the found assembler is not actually the GNU
  assembler. If you have more than one assembler installed on your
  system, you may want to use this option in connection with
  <code>--with-as=/path/to/gas</code>.</li>

  <li> <code>--with-as=</code><i>/path/to/as</i> -- Specify that the compiler
  should use the assembler pointed to by <i>pathname</i>, rather than
  the one found by the standard rules to find an assembler, which are:
  <ul>
     <li> Check the <i>$exec_prefix/lib/gcc-lib/$target/$version</i>
     directory, where <i>$exec_prefix</i> defaults to <i>$prefix</i>
     which defaults to <tt>/usr/local</tt> unless overridden by the
     <code>--prefix=/pathname</code> switch described above.
     <i>$target</i> is the target system triple, such as
     <i>sparc-sun-solaris2.7</i>, and <i>$version</i> denotes the GCC
     version, such as <i>2.95.2</i>.</li>

     <li> Check operating system specific directories
     (e.g. <tt>/usr/ccs/bin</tt> on Sun Solaris).</li>
  </ul>
  Note that these rules do not check for the value of
  <i>$PATH</i>. You may want to use <code>--with-as</code> if no assembler
  is installed in the directories listed above, or if you have
  multiple assemblers installed and want to choose one that is not
  found by the above rules.</li>

  <li> <code>--with-gnu-ld</code> -- Same as <code>--with-gnu-as</code> but
  for the linker.</li>

  <li> <code>--with-ld=</code><i>/path/to/ld</i> -- Same as
  <code>--with-as</code>, but for the linker.</li>

  <li> <code>--with-stabs</code> -- Specify that stabs debugging
  information should be used instead of whatever format the host
  normally uses.  Normally GCC uses the same debug format as the host
  system.</li>

  <li> <code>--enable-multilib</code> -- Specify that multiple target libraries
  should be built to support different target variants, calling conventions,
  etc.  This is the default.</li>

  <li> <code>--enable-threads</code> -- Specify that the target supports threads.
  This affects the Objective-C compiler and runtime library, and exception
  handling for other languages like C++ and Java.</li>

  <li> <code>--enable-threads=</code><i>lib</i> -- Specify that <i>lib</i> is the
  thread support library.  This affects the Objective-C compiler and
  runtime library, and exception handling for other languages like C++ and
  Java.</li>

  <li> <code>--with-cpu=</code><i>cpu</i> -- Specify which cpu variant the
  compiler should generate code for by default.  This is currently
  only supported on the some ports, specifically arm, powerpc, and
  SPARC. If configure does not recognize the model name (e.g. arm700,
  603e, or ultrasparc) you provide, please check the configure script
  for a complete list of supported models.</li>

  <li> <code>--enable-target-optspace</code> -- Specify that target libraries
  should  be optimized for code space instead of code speed.  This is the
  default for the m32r platform.</li>

  <li> <code>--enable-cpp</code> -- Specify that a shell script which emulates
  traditional cpp functionality should be installed.</li>

  <li> <code>--enable-cpplib</code> -- Specify that the functionality of
  CPP should be integrated into the compiler itself.  This option is
  not supported by snapshots since November 2000.  In snapshots where
  it is supported, it is not enabled by default, except for snapshots
  very close to November 2000.</li>

  <li> <code>--without-fast-fixincludes</code> -- Specify that the old, slower
  method of fixing the system header files should be used. 
  EGCS 1.1.x and older releases default to the slow version. GCC 2.95 and
  newer releases will default to the fast version.</li>

  <li> <code>--enable-version-specific-runtime-libs</code> -- Specify that runtime
  libraries should be installed in the compiler specific subdirectory
  (<tt>${libsubdir}</tt>) rather than the usual places.
  In addition, libstdc++'s include files will be installed in
  <tt>${libsubdir}/include/g++</tt> unless you overruled it by using
  <code>--with-gxx-include-dir=</code><i>dirname</i>.
  Using this option is particularly useful if you intend to use several
  versions of GCC in parallel. This is currently supported by <tt>libf2c</tt>
  and <tt>libstdc++</tt>.</li>

  <li>
  <code>--enable-languages=</code><i>lang1</i><code>,</code><i>lang2</i><code>,...</code> 
  -- Specify that only a particular subset of compilers and their runtime libraries
  should be built. For a list of valid values for <i>lang</i><code>x</code> you can issue
  the following command in the <code>gcc</code> directory of your GCC source tree:<br>
  <code>
  grep language= */config-lang.in
  </code><br>
  Currently, you can use any of the following: <code>c++</code>,
  <code>f77</code>, <code>java</code> and <code>objc</code>.
  <code>CHILL</code> is not currently maintained, and will almost
  certainly fail to compile.  Note that this switch does not work with
  EGCS 1.1.2 or older versions of egcs.  It is supported in GCC 2.95
  and newer versions.  <br>
  If you do not pass this flag, all languages available in the <code>gcc</code> sub-tree
  will be configured.  Re-defining LANGUAGES when calling <code>make bootstrap</code>
  <b>*does not*</b> work anymore, as those language sub-directories might not have been
  configured!</li>

  <li>
  <code>--disable-libgcj</code> -- Specify that the run-time libraries
  used by GCJ should not be built.  This is useful in case you intend
  to use GCJ with some other run-time, or you're going to install it
  separately, or it just happens not to build on your particular
  machine.  In general, if the Java front-end is enabled, the GCJ
  libraries will be enabled too, unless they're known to not work on
  the target platform.  If GCJ is enabled but libgcj isn't built, you
  may need to port it; in this case, before modifying the top-level
  configure.in so that libgcj is enabled by default on this platform,
  you may use <code>--enable-libgcj</code> to override the default.
  </li>

  <li> <code>--with-dwarf2</code> -- Specify that the compiler should use DWARF2
  debugging information as the default.</li>
</ul>

<p>Some options which only apply to building cross compilers:
<ul>
  <li> <code>--with-headers=</code><i>dir</i> -- Specifies a directory which has
  target include files.
  <em>This options is required</em> when building a cross
  compiler, if <tt>${prefix}/${target}/sys-include</tt> doesn't pre-exist.
  These include files will be copied into the gcc install directory.
  Fixincludes will be run on these files to make them compatible with
  gcc.</li>

  <li> <code>--with-libs=</code><i>"dir1 dir2 ... dirN"</i> -- Specifies a list of
  directories which contain the target runtime libraries.  These libraries will
  be copied into the gcc install directory.</li>

  <li> <code>--with-newlib</code> -- Specifies that "newlib" is being used as the target
  C library.   This causes __eprintf to be omitted from libgcc.a on the
  assumption that it will be provided by newlib.</li>
</ul>
 
<p>Note that each <code>--enable</code> option has a corresponding
<code>--disable</code> option and that each <code>--with</code> option
has a corresponding <code>--without</code> option.

<hr>
<p><a href="./index.html">Return to the GCC Installation page</a></p>

</body>
</html>
