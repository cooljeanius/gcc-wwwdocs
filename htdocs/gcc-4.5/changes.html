<html>

<head>
<title>GCC 4.5 Release Series &mdash; Changes, New Features, and Fixes</title>
</head>

<!-- GCC maintainers, please do not hesitate to update/contribute entries
     concerning those part of GCC you maintain!  2002-03-23, Gerald.
-->

<body>
<h1>GCC 4.5 Release Series<br />Changes, New Features, and Fixes</h1>

<h2>Caveats</h2>

  <ul>
    <li>Support has been removed for all the 
    <a href="../gcc-4.4/changes.html#obsoleted">configurations obsoleted
    in GCC 4.4</a>.</li>
    <li>Support has been removed for the <code>protoize</code>
    and <code>unprotoize</code> utilities, obsoleted in GCC 4.4.</li>
 </ul>

<h2>General Optimizer Improvements</h2>

  <ul>

    <li>The <code>-save-temps</code> now takes an optional argument.  The
    <code>-save-temps</code> and <code>-save-temps=cwd</code> switches write
    the temporary files in the current working directory based on the original
    source file.  The <code>-save-temps=obj</code> switch will write files into
    the directory specified with the <code>-o</code> option, and the
    intermediate filenames are based on the output file.  This will allow the
    user to get the compiler intermediate files when doing parallel builds
    without two builds of the same filename located in different directories
    from interfering with each other.</li>

    <li>Debugging dumps are now created in the same directory as the
    object file rather than in the current working directory.  This
    allows the user to get debugging dumps when doing parallel builds
    without two builds of the same filename interfering with each other.</li>

    <li>The <a href="http://www.multiprecision.org/">Multiple Precision
    Complex Library</a> (MPC) is now used if found at configure time.
    This allows GCC to evaluate calls to complex built-in math functions
    having constant arguments at compile-time and replace them with their
    mathematically equivalent results. Some complex functions were
    supported before; for those a fall back is used if MPC is not
    available.</li>

  </ul>

<h2>New Languages and Language specific improvements</h2>

<h3>All languages</h3>
  <ul>
    <li>The <code>-fshow-column</code> option is now on by default.  This 
    means error messages now have a column associated with them.</li>
  </ul>

<h3>Ada</h3>

<h3>C family</h3>

  <ul>
    <li>If a header named in a <code>#include</code> directive is not
    found, the compiler exits immediately.  This avoids a cascade of
    errors arising from declarations expected to be found in that
    header being missing.</li>
    <li>GCC now implements C90- and C99-conforming rules for constant
    expressions.  This may cause warnings or errors for some code
    using expressions that can be folded to a constant but are not
    constant expressions as defined by ISO C.</li>
  </ul>

<h3>C++</h3>
  <ul>
    <li><a href="cxx0x_status.html">Improved experimental support for
    the upcoming ISO C++ standard, C++0x</a>. Including support
    for <code>explicit</code> type conversion operators.</li>

    <li>When printing the name of a class template specialization, G++ will
    now omit any template arguments which match the default template
    argument for that parameter.  This behavior (and the pretty-printing of
    function template specializations as template signature and arguments)
    can be disabled with the <code>-fno-pretty-templates</code>
    option.</li>

    <li>Access control is now applied to <code>typedef</code> names used in
    a template, which may cause G++ to reject some ill-formed code that was
    accepted by earlier releases.  The <code>-fno-access-control</code>
    flag can be used as a temporary workaround until the code is
    corrected.</li>

  </ul>  
  <h4>Runtime Library (libstdc++)</h4>

<h3>Fortran</h3>
  <ul>
    <li>The <code>COMMON</code> default padding has been changed &ndash;
    instead of adding the padding before a variable it is now added
    afterwards, which increases the compatibility with other vendors
    and helps to obtain the correct output in some cases. Cf. also the
    <code>-falign-commons</code> flag (<a href="../gcc-4.4/changes.html">added
    in 4.4</a>).</li>

    <li>The <code>-finit-real=</code> flag now also supports the value
    <code>snan</code> for signalling not-a-number; to be effective,
    one additionally needs to enable trapping (e.g. via
    <code>-ffpe-trap=</code>). Note: Compile-time optimizations can
    turn a signalling NaN into a quiet one.</li>

    <li>The new flag <code>-fcheck=</code> has been added with the
    options <code>bounds</code>, <code>array-temps</code>,
    <code>do</code>, and <code>recursive</code>. The
    <code>bounds</code> and <code>array-temps</code> options are
    equivalent to <code>-fbounds-check</code> and
    <code>-fcheck-array-temporaries</code>. The <code>do</code>
    option checks for invalid modification of loop iteration variables,
    and the <code>recursive</code> option tests for recursive calls
    to subroutines/functions which are not marked as recursive. Using
    <code>-fcheck=all</code> enables all these run-time checks.</li>

    <li>The run-time checking <code>-fcheck=bounds</code> now warns
    about invalid string lengths of character dummy arguments. Additionally,
    more compile-time checks have been added.</li>

    <li>GNU Fortran no longer links against <code>libgfortranbegin</code>.
    As before, <code>MAIN__</code> (assembler symbol name) is the actual
    Fortran main program, which is invoked by the <code>main</code> function.
    However, <code>main</code> is now generated and put in the same object
    file as <code>MAIN__</code>. For the time being,
    <code>libgfortranbegin</code> still exists for backward
    compatibility. For details see the new <a
    href="http://gcc.gnu.org/onlinedocs/gfortran/Mixed_002dLanguage-Programming.html">Mixed-Language
    Programming</a> chapter in the manual.</li>

    <li>The I/O library was restructured for performance and cleaner
    code.</li>

    <li>Array assignments and <code>WHERE</code> are now run in parallel when
    OpenMP's <code>WORKSHARE</code> is used.</li>

    <li>The experimental flag <code>-fwhole-file</code> was added. The flag
    allows whole-file checking of procedure arguments and allows for better
    optimizations. It can also be used with <code>-fwhole-program</code>,
    which is now also supported in gfortran.</li>

    <li>More Fortran 2003 and Fortran 2008 mathematical functions can
    now be used as initialization expressions.</li>
    <li>Some extended attributes such as <code>STDCALL</code> are now
    supported via the <a
    href="http://gcc.gnu.org/onlinedocs/gfortran/GNU-Fortran-Compiler-Directives.html">
    <code>GCC$</code> compiler directive</a>.</li>

    <li>Fortran 2003 support has been extended:
      <ul>
       <li>Procedure-pointer function results and procedure-pointer
       components with the NOPASS attribute,</li>
       <li><code>DEFERRED</code> type-bound procedures, and</li>
       <li>the ERRMSG= argument of the ALLOCATE and DEALLOCATE statements
       have been implemented.</li>
       <li>The <code>INT_FAST{8,16,32,64,128}_T</code> kind type parameters
       of the intrinsic module <code>ISO_C_BINDING</code> are now supported.
       </li>
      </ul>
    </li>

    <li>Fortran 2008 support has been extended:
      <ul>
        <li>The <code>OPEN</code> statement now supports the
        <code>NEWUNIT=</code> option, which returns a unique file unit,
        thus preventing inadvertent use of the same unit in different parts
        of the program.</li>
        <li>The <code>INT{8,16,32}</code> and <code>REAL{32,64,128}</code>
        kind type parameters of the intrinsic module
        <code>ISO_FORTRAN_ENV</code> are now supported.</li>
      </ul>
    </li>
  </ul>

<h3>Java (GCJ)</h3>

<h2 id="targets">New Targets and Target Specific Improvements</h2>

<h3>AIX</h3>
  <ul>
    <li>Full cross-toolchain support now available with GNU Binutils</li>
  </ul>

<h3>AVR</h3>
  <ul>
    <li>The <code>-mno-tablejump</code> option has been removed because it
    has the same effect as the <code>-fno-jump-tables</code> option.</li>
  </ul>

<h3>IA-32/x86-64</h3>
  <ul>
    <li>GCC now supports handling floating-point excess precision
    arising from use of the x87 floating-point unit in a way that
    conforms to ISO C99.  This is enabled
    with <code>-fexcess-precision=standard</code> and with standards
    conformance options such as <code>-std=c99</code>, and may be
    disabled using <code>-fexcess-precision=fast</code>.</li>
    <li>Support for the Intel Atom processor is now available through the
        <code>-march=atom</code> and <code>-mtune=atom</code> options.</li>
  </ul>

<h3 id="mep">MeP</h3>

<p>Support has been added for the Toshiba Media embedded Processor (MeP, or
mep-elf) embedded target.</p>

<h3>MIPS</h3>

<h3 id="picochip">picochip</h3>

<h2>Documentation improvements</h2>

<h2>Other significant improvements</h2>

<h3>Plugins</h3>
  <ul>
    <li>It is now possible to extend the compiler without having to
    modify its source code.  A new option <code>-fplugin=file.so</code>
    tells GCC to load the shared object <code>file.so</code> and execute
    it as part of the compiler.  The internal documentation describes
    the details on how plugins can interact with the compiler.</li>
  </ul>


</body>
</html>
