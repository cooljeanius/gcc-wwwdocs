<html>

<head>
<title>GCC 3.2 Changes, New Features, and Fixes</title>
</head>

<!-- GCC maintainers, please do not hesitate to update/contribute entries
     concerning those part of GCC you maintain!  2002-03-23, Gerald.
-->

<body>

<!-- Changes for later point releases should be added at the top. -->

<h1>Changes in GCC 3.2.1</h1>

<h2>C/C++/Objective-C</h2>

 <ul>
    <li>The method of constructing the list of directories to be searched
	for header files has been revised.  If a directory named by a
	<code>-I</code> option is a standard system include directory,
	the option is ignored to ensure that the default search order
	for system directories and the special treatment of system header
	files are not defeated.</li>

    <li>The C and Objective-C compilers no longer accept the "Naming
        Types" extension (<code>typedef foo = bar</code>); it was
        already unavailable in C++.  Code which uses it will need to
        be changed to use the "typeof" extension instead:
        <code>typedef typeof(bar) foo</code>.  (We have removed this
        extension without a period of deprecation because it has
        caused the compiler to crash since version 3.0 and no one
        noticed until very recently.  Thus we conclude it is not in
        widespread use.)</li>
 </ul>

<h2>New Targets and Target Specific Improvements</h2>

<h3>IA-32</h3>
  <ul>
   <li>Fixed a number of bugs in SSE and MMX intrinsics.</li>
   <li>Fixed common compiler crashes with SSE instruction set enabled
       (implied by <code>-march=pentium3</code>, <code>pentium4</code>,
        <code>athlon-xp</code>)</li>
   <li>__m128 and __m128i is not 128bit aligned when used in structures.</li>
  </ul>
<h3>x86-64</h3>
 
  <ul>
   <li>A bug whereby the compiler could generate bad code for
       <code>bzero</code> has been fixed.</li>
   <li>ABI fixes (implying ABI incompatibilities with previous version in some
   corner cases)</li>
   <li>Fixed prefetch code generation</li>
  </ul>

<h2>Bug Fixes</h2>

<p>See <a
href="http://gcc.gnu.org/ml/gcc/2002-11/msg00445.html">this message</a> for 
a list of bugs fixed in this release.</p>

<h1>Changes in GCC 3.2</h1>

<p>3.2 is a small bug fix release, but there is a change to the application
binary interface (ABI), hence the change to the second part of the version
number.</p>

<p>The main purpose of the 3.2 release is to correct a couple of problems in
the C++ ABI, with the intention of providing a stable interface going
forward.&nbsp; Accordingly, 3.2 is only a small change to 3.1.1.</p>

<p>In addition, a number of bug fixes for the C++ standard library are
included in this release.</p>

<p>There is one platform-specific bug fix (for x86-64 &mdash; AMD's 64-bit
architecture).&nbsp; Other than that, for users of C, Java, Objective-C, Ada, or
Fortran, there are no significant changes with respect to 3.1.1.</p>

<p>Below you will find a list of the problem reports (PRs) from GCC's bug
tracking system (GNATS) that are known to be fixed in the 3.2
release.&nbsp; This list might not be complete (that is, it is likely that some
bug fixes have been missed).</p>

<h2>Bug Fixes</h2>

<ul>
<li><h3>C++</h3>
<ul>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7320">7320</a>: g++ 3.2 relocation problem</li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7470">7470</a>: vtable: virtual function pointers not in declaration order</li>
</ul></li>

<li><h3>libstdc++</h3>
<ul>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=6410">6410</a>: Trouble with non-ASCII monetary symbols and <code>wchar_t</code></li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=6503">6503</a>,
    <a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=6642">6642</a>,
    <a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7186">7186</a>: Problems with comparing or subtracting various types of const and non-const iterators</li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7216">7216</a>: ambiguity with <code>basic_iostream::traits_type</code></li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7220">7220</a>: problem with <code>basic_istream::ignore(0,delimiter)</code></li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7222">7222</a>: <code>locale::operator==()</code> doesn't work on <code>std::locale("")</code></li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7286">7286</a>: placement operator delete issue</li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7442">7442</a>: <code>cxxabi.h</code> does not match the C++ ABI</li>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7445">7445</a>: poor performance of <code>std::locale::classic()</code> in multi-threaded applications</li>
</ul></li>

<li><h3>x86-64 specific</h3>
<ul>
<li><a href="http://gcc.gnu.org/cgi-bin/gnatsweb.pl?cmd=view%20audit-trail&amp;pr=7291">7291</a>: off-by-one in generated inline <code>bzero</code> code for x86-64</li>
</ul></li>
</ul>

<h2>Caveats</h2>

  <ul>
    <li>The C++ compiler does not correctly zero-initialize
        pointers-to-data members.  You must explicitly initialize
        them.  For example:
        <pre>
           int S::*m(0);
        </pre>
        will work, but depending on default-initialization to zero
        will not work.  This bug cannot be fixed in GCC 3.2 without
        inducing unacceptable risks.  It will be fixed in GCC 3.3.</li>

    <li>This GCC release is based on the GCC 3.1 sourcebase, and thus has
    all the <a href="../gcc-3.1/changes.html">changes in the GCC 3.1 series</a>.
    In addition, GCC 3.2 has a number of C++ ABI fixes which make its
    C++ compiler generate binary code which is incompatible with the C++
    compilers found in earlier GCC releases, including GCC 3.1 and
    GCC 3.1.1.</li>
  </ul>


<h2>New Languages and Language specific improvements</h2>

<h3>C++</h3>

  <ul>
    <li>There are now no known differences between the C++ ABI
    implemented in GCC and the multi-vendor standard.  We believe that
    the ABI for the C++ standard library is now stable and will not
    change in future versions of the compiler.  However, hard
    experience has taught us to be cautious; it is possible that more
    problems will be found.  It is our intention to make changes to
    the ABI only if they are necessary for correct compilation of C++,
    as opposed to conformance to the ABI documents.</li>

    <li>For details on how to build an ABI compliant compiler for
    GNU/Linux systems, check the <a href="c++-abi.html">common C++ ABI
    page</a>.</li>
  </ul>


</body>
</html>
