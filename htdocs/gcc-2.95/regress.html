<html>
<head>
<title>gcc-2.95 regression test strategy</title>
</head>
<body>
<h1 align="center">gcc-2.95 regression test strategy</h1>

<h2> Regression Testing </h2>
<p>One of the critical steps in making releases is regression testing.  For
gcc-2.95 we want to perform regression tests against egcs-1.1.2.

<p>Since it is impossible to test every platform, we have selected a list
of popular platforms for which gcc-2.95 should have no regressions relative
to egcs-1.1.2 for gcc, g++, g77, objc, libstdc++ and libio.

We also want to run libf2c and libjava testsuites to verify some basic
functionality.

<p>We encourage testing of platforms not on the official regression test
list.  However, the "no regressions" policy does not necessarily apply
to targets not on the official regression test list.

<p>Contact <a href="mailto:cheewai_yeung@yahoo.com">cheewai_yeung@yahoo.com</a>
directly if you want to help with the regression testing phase of the gcc-2.95
release cycle.

<h2>How to run the regression tests</h2>

<p>  First, you must get out of the egcs object directory.  So change 
     directories into your home directory, /tmp or somewhere else.

<p>  Second, you need an appropriate site.exp.  Here is a template:

<pre>
# snapdir should point to the top-level directory of an unpacked gcc-2.95
# snapshot
set snapdir "/some/place/gcc-19990415"

# set old_release_prefix to the prefix directory of an installed egcs-1.1.2.
set old_release_prefix /prefix/for/egcs-1.1.2

set rootme "."
set target_triplet [exec "$snapdir/config.guess"]
set srcdir "$snapdir/gcc/testsuite"
set GCC_UNDER_TEST "$old_release_prefix/bin/gcc"
set GXX_UNDER_TEST "$old_release_prefix/bin/g++"
set G77_UNDER_TEST "$old_release_prefix/bin/g77"
</pre>

<p>Obviously you have to change "snapdir" and "old_release_prefix" to
appropriate values.

<p>Then run the tests with the following commands:

<pre>
  runtest --tool gcc
  runtest --tool g++
  runtest --tool g77
  runtest --tool objc
</pre>


<p>This will create "gcc.sum", "g++.sum", "g77.sum" and objc.sum.  You should
send those files to the testing coordinator
<a href="mailto:cheewai_yeung@yahoo.com">cheewai_yeung@yahoo.com</a>.

<p> We will also perform some tests on the runtime libraries, but there is
no need to run those tests with the egcs-1.1.2 based compiler.  Details for
running and these test results will be added soon.

<p>In addition to testsuite regression testing we need regression testing
to verify that the new fast-fixincludes performs the same effective fixes
as the old slow fixincludes script.  Details for checking this will be
provided shortly.

<p>Note that the minor versions of the systems below are subject to change
based on what OS versions the test volunteers have.
<h2>Current Regression Testing Status</h2>
<p>
<table border="0">
<tr>
<th>
Platform
</th>
<th>
build
</th>
<th>
regressions
</th>
<th>
java tests
</th>
<th>
libg++ tests
</th>
<th>
fast-fixinc
</th>
</tr>
<tr>
<td>
alpha-dec-osf4.0
</td>
<td>
OK
</td>
<td>
(gcc,g++,g77,objc in progress)
</td>
<td>
</td>
<td>
OK
</td>
<td>
// comment fix failures
</td>
</tr>
<tr>
<td>
alphaev5-unknown-linux-gnu
</td>
<td>
OK
</td>
<td>
execute/990513-1.c
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
hppa1.1-hp-hpux10.20
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i386-pc-freebsd2.2.6
</td>
<td>
OK
</td>
<td>
980312-1
980313-1
980414-1
gcov-1
gcov-2
major c++ failures
19990502-0
objc tests
</td>
<td>
</td>
<td>
linker errors
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i386-pc-freebsd3.0
</td>
<td>
OK
</td>
<td>
null1
</td>
<td>
</td>
<td>
tgetent redeclaration
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i586-pc-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-linux-gnulibc1
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-sco3.2v5.0.5
</td>
<td>
OK
</td>
<td>
tcomplex
tlist (dwarf1 bug)
tmap
tstring
tvector
980312-1.c
980313-1.c
990127-2.c
bf-pack-1.c
conversion.c
eeprof-1.c
typename8.C
sig13.C
new3.C
970816-3.f
971102-1.f
u77-test.f
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
m68k-hp-bsd4.4
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
mips-sgi-irix6.5
</td>
<td>
OK
</td>
<td>
990513-1.c
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
{rs6000,powerpc}-ibm-aix4.2
</td>
<td>
OK
</td>
<td>
921208-2.c
crash11
900428_02
900519_13
attrib5
access18
member
overload21
thunk2
thunk3
init1
eh30
p4750
cast2
friend1
friend4
static3
static6
typename8
eb106
objc (all)
</td>
<td>
</td>
<td>
bool lossage
</td>
<td>
</td>
</tr>
<tr>
<td>
powerpc-ibm-linux-gnu
</td>
<td>
OK
</td>
<td>
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
sparc-sun-solaris2.5
</td>
<td>
OK
</td>
<td>
990513-1.c
asm-extn1.C
tComplex
</td>
<td>
</td>
<td>
tRational
tRandom
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
sparc-sun-solaris2.7
</td>
<td>
OK
</td>
<td>
990513-1.c
asm-extn1.C
tComplex
</td>
<td>
</td>
<td>
tRational
tRandom
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
sparc-sun-sunos4.1
</td>
<td>
OK
</td>
<td>
990513-1.c
asm-extn1.C
static3.C
static6.C
</td>
<td>
</td>
<td>
tRational
tRandom
</td>
<td>
</td>
</tr>
<tr>
<td>
sparc-sun-linux-gnu
</td>
<td>
OK
</td>
<td>
990513-1
memcpy-bi?
objc tests
tcomplex
</td>
<td>
</td>
<td>
</td>
<td>
N/A
</td>
</tr>
</table>

<h1> Regression testing notes </h1>
<p> execute/990513-1.c is regressing on several targets.  It is a bug in
the loop optimizer.  I've passed it on to Joern.  Hopefully it will get
fixed soon.

<p> The "conpr" tests are testing for construtor prioritiy support which
is dependent on specific versions of gas & gld and egcs/gcc.  It is expected
that egcs-1.1.2 may fail in the compilation stage while gcc-2.95 may fail
the execution stage. 

<p> libg++ uses some nonstandard features (like M_PI) which do not exist
on some systems (notably Stunos).  Hacks where installed to work around
the non-portable code in libg++ so that it could be tested.

<h2> Package/Feature Testing </h2>
<p> Do not worry about this yet.  Please concentrate on getting the egcs-1.1.2
regression tests done first.

<p> In addition to performing regression testing we want to test major
software packages with gcc-2.95.  This list is not complete (I would like
to add at least one major C++ and Fortran package).

<ul>
  <li> linux-2.2.9 on the alpha, powerpc, sparc and x86
  <li> RedHat 5.2 or 6.0 builds on the alpha, sparc and x86
  <li> glibc-2.1 builds and passes its selftest on alpha, powerpc, sparc and
       x86 linux ports.
  <li> C++ package(s)
  <li> Fortran package(s)
</ul>

<p><i>Last modified on June 7, 1999.</i>

<!--#include virtual="/glimpsebox.html"-->
</body>
</html>
