<html>
<head>
<title>gcc-2.95 regression test strategy</title>
</head>
<body>
<h1 align="center">gcc-2.95 regression test strategy</h1>

<h2> Regression Testing </h2>
<p>One of the critical steps in making releases is regression testing.  For
gcc-2.95 we want to perform regression tests against egcs-1.1.2.

<p>Since it is impossible to test every platform, we have selected a list
of popular platforms for which gcc-2.95 should have no regressions relative
to egcs-1.1.2 for gcc, g++, g77, objc, libstdc++ and libio.

We also want to run libf2c and libjava testsuites to verify some basic
functionality.

<p>We encourage testing of platforms not on the official regression test
list.  However, the "no regressions" policy does not necessarily apply
to targets not on the official regression test list.

<p>Contact <a href="mailto:cheewai_yeung@yahoo.com">cheewai_yeung@yahoo.com</a>
directly if you want to help with the regression testing phase of the gcc-2.95
release cycle.

<h2>How to run the regression tests</h2>

<p>  First, you must get out of the egcs object directory.  So change 
     directories into your home directory, /tmp or somewhere else.

<p>  Second, you need an appropriate site.exp.  Here is a template:

<pre>
# snapdir should point to the top-level directory of an unpacked gcc-2.95
# snapshot
set snapdir "/some/place/gcc-19990415"

# set old_release_prefix to the prefix directory of an installed egcs-1.1.2.
set old_release_prefix /prefix/for/egcs-1.1.2

set rootme "."
set target_triplet [exec "$snapdir/config.guess"]
set srcdir "$snapdir/gcc/testsuite"
set GCC_UNDER_TEST "$old_release_prefix/bin/gcc"
set GXX_UNDER_TEST "$old_release_prefix/bin/g++"
set G77_UNDER_TEST "$old_release_prefix/bin/g77"
</pre>

<p>Obviously you have to change "snapdir" and "old_release_prefix" to
appropriate values.

<p>Then run the tests with the following commands:

<pre>
  runtest --tool gcc
  runtest --tool g++
  runtest --tool g77
  runtest --tool objc
</pre>


<p>This will create "gcc.sum", "g++.sum", "g77.sum" and objc.sum.  You should
send those files to the testing coordinator
<a href="mailto:cheewai_yeung@yahoo.com">cheewai_yeung@yahoo.com</a>.

<p> We will also perform some tests on the runtime libraries, but there is
no need to run those tests with the egcs-1.1.2 based compiler.  Details for
running and these test results will be added soon.

<p>In addition to testsuite regression testing we need regression testing
to verify that the new fast-fixincludes performs the same effective fixes
as the old slow fixincludes script.  Details for checking this will be
provided shortly.

<p>Note that the minor versions of the systems below are subject to change
based on what OS versions the test volunteers have.
<h2>Current Regression Testing Status</h2>
<p>
<table border="0">
<tr>
<th>
Platform
</th>
<th>
build
</th>
<th>
regressions
</th>
<th>
java tests
</th>
<th>
libg++ tests
</th>
<th>
fast-fixinc
</th>
</tr>
<tr>
<td>
alpha-dec-osf4.0
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
alphaev5-unknown-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
hppa1.1-hp-hpux10.20
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i386-pc-freebsd2.2.6
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i386-pc-freebsd3.0
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
i586-pc-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-linux-gnulibc1
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
i686-pc-sco3.2v5.0.5
</td>
<td>
OK
</td>
<td>
tcomplex
980312-1.c
980313-1.c
990127-2.c
bf-pack-1.c
conversion.c
eeprof-1.c
typename8.C
sig13.C
new3.C
970816-3.f
971102-1.f
u77-test.f
io1.f
</td>
<td>
</td>
<td>
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
m68k-hp-bsd4.4
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
mips-sgi-irix6.5
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
{rs6000,powerpc}-ibm-aix4.2
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
powerpc-ibm-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
<tr>
<td>
sparc-sun-solaris2.5
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
sparc-sun-solaris2.7
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
sparc-sun-sunos4.1
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
OK
</td>
</tr>
<tr>
<td>
sparc-sun-linux-gnu
</td>
<td>
OK
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
N/A
</td>
</tr>
</table>

<h1> Regression testing notes </h1>
<p> The "conpr" tests are testing for construtor prioritiy support which
is dependent on specific versions of gas & gld and egcs/gcc.  It is expected
that egcs-1.1.2 may fail in the compilation stage while gcc-2.95 may fail
the execution stage. 

<p> libg++ uses some nonstandard features (like M_PI, or redefining tcgetent).
These are bugs in libg++, not egcs or its support libraries.  Hacks were
installed to work around these libg++ bugs so that libg++ could be tested.

<h2> Package/Feature Testing </h2>
<p>
<table border="0">
<tr>
<th>
Platform
</th>
<th>
linux-2.2.10
</th>
<th>
linux-2.3.7
</th>
<th>
glibc-2.1.1
</th>
<th>
redhat-5.2
</th>
<th>
redhat-6.0
</th>
</tr>
<tr>
<td>
alphaev5-unknown-linux-gnu
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
i586-unknown-linux-gnu
</td>
<td>
OK
</td>
<td>
</td>
<td>
OK
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
i686-unknown-linux-gnu
</td>
<td>
OK
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
powerpc-unknown-linux-gnu
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
sparc-unknown-linux-gnu
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
</table>
<h1> Package testing notes </h1>
<p> Note the linux kernel, modules and related code must be compiled
with -fno-strict-aliasing as the linux kernel violates ANSI/ISO C standards
used to perform type based alias analysis.

<p> In addition to performing regression testing we want to test major
software packages with gcc-2.95.  This list is not complete (I would like
to add at least one major C++ and Fortran package).

<ul>
  <li> C++ package(s)
  <li> Fortran package(s)
</ul>

<p><i>Last modified on June 22, 1999.</i>

</body>
</html>
