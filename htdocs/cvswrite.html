<html>
<head>
<meta name="description"
      content="Instructions for read-write access to the GCC CVS repository." />
<meta name="keywords"
      content="GCC, patches, checking in, CVS, SSH" />
<title>Read-write CVS access</title>
</head>

<body>

<h1>Read-write CVS access</h1>

<p>We have read/write access to the CVS repository available for
significant developers. Maintainers are also encouraged to <a
href="bugs/management.html">edit our bugs database</a>.</p>

<hr />
<h2>Contents</h2>
<ol>
  <li><a href="#authenticated">Authenticated access</a></li>
  <li><a href="#setup">Setting up your local CVS tree</a></li>
  <li><a href="#checkin">Checking in a change</a></li>
</ol>

<hr />
<h2><a name="authenticated">Authenticated access</a></h2>

<p>We provide authenticated access via the SSH protocol.</p> 

<p>If you already have an account on sources.redhat.com, please send
email to <code>overseers(at)gcc.gnu.org</code> with a request
for access to the GCC repository.  Include the name of the person who
is sponsoring your access.
Else use <a
href="http://sources.redhat.com/cgi-bin/pdw/ps_form.cgi">this form</a>
to supply your SSH public key (which you can generate via the
<code>ssh-keygen</code> program) and other details.</p>

<p>Once we have this information we will set up an account on
gcc.gnu.org and inform you by mail.  At this point you
should be able to check out a tree with CVS and add yourself to the
MAINTAINERS file to test write access, following the instructions below.</p>

<hr />
<h2><a name="setup">Setting up your local CVS tree</a></h2>

<p>Once your account has been set up, check out the GCC sources by setting
<code>CVS_RSH</code> in your environment to "<code>ssh</code>" and issuing
the command</p>

<blockquote><p><code>
cvs -z 9 -d :ext:<i>username</i>@gcc.gnu.org:/cvs/gcc co -P gcc
</code></p></blockquote>

<p>where <i>username</i> is your user name at gcc.gnu.org.</p>

<p>It is also possible to convert an existing CVS tree to use SSH by
replacing all the "Root" files in the local tree with the following
contents:</p>

<blockquote><p><code>
<i>username</i>@gcc.gnu.org:/cvs/gcc
</code></p></blockquote>

<p>To avoid the nuisance of having to supply your passphrase for each
operation, you may want to use <code>ssh-agent</code>(1) and
<code>ssh-add</code>(1).</p>

<p>To avoid messages about (lack of) X11 forwarding, put in your
<samp>$HOME/.ssh/config</samp> an entry like:</p>

<blockquote><p><code>
Host gcc.gnu.org<br />
ForwardX11 no
</code></p></blockquote>

<h2>Web pages</h2>

<p>When you check in changes to our web pages, they will
automatically be checked out into the web server's data area.</p>

<hr />
<h2><a name="checkin">Checking in a change</a></h2>

<p>The following is meant to provide a very quick overview of how to
check in a change.  It is not meant to be a replacement for the CVS
manual but instead a supplement.  The CVS manual is distributed as
part of the CVS sources as a texinfo file.  <a
href="http://www.cvshome.org/cyclic/cvs/doc-blandy.html">
http://www.cvshome.org/cyclic/cvs/doc-blandy.html</a> contains a link
to an reasonably simple introduction to CVS.</p>

<p>In all the commands listed below, you can give an explicit list of
filenames to the cvs command.  We recommend you list files explicitly
when performing checkins to avoid accidental checkins of local
code.</p>

<p>We prefer that each CVS checkin be of a complete, single logical
change, which may affect multiple files.  The log message for that
checkin should be the complete ChangeLog entry for the change.  This
makes it easier to correlate changes across files, and minimizes the
time the repository is inconsistent.  If you have several unrelated
changes, you should check them in with separate cvs commit
commands.</p>

<ol>
<li>Sync your sources with the master repository via "<code>cvs
update</code>" before attempting a checkin; this will save you a little
time if someone else has modified that file since the last time you
synced your sources.  It will also identify any files in your local
tree that you have modified.</li>

<li>Apply the patch to your local tree and update the ChangeLog file.
Use the current date/time for the ChangeLog entry, not the time that
the patch was submitted.</li>

<li>Make sure to rebuild any generated files that would be affected by
the patch.  Make sure to check them in along with the files explicitly
modified by the patch.</li>

<li>We recommend using "<code>cvs diff</code>" after applying a patch to a
local tree.  Review the output to make sure that only the changes you
wanted to check in will be checked in.  Also check to see if the
copyright dates need to be updated.</li>

<li>Use "<code>cvs commit</code>" to check in the patch.  You can enter
the log message via the "<code>-m</code>" argument to commit, or wait for
the editor window to appear and enter the log message in the editor
window.</li>

<li>After exiting the editor, CVS will connect to the GCC cvs server
and check in your changes.  When your prompt returns the checkin is
finished.  A message will be sent to the gcc-cvs mailing
list indicating that a change was made.  CVS will provide a message if
an error occurs and it will not check in any files.</li>
</ol>

</body>
</html>
