<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>GCC 10 Release Series &mdash; Changes, New Features, and Fixes</title>
<link rel="stylesheet" type="text/css" href="https://gcc.gnu.org/gcc.css" />
</head>

<!-- GCC maintainers, please do not hesitate to contribute/update
     entries concerning those part of GCC you maintain!
-->

<body>
<h1>GCC 10 Release Series<br/>Changes, New Features, and Fixes</h1>

<p>
This page is a "brief" summary of some of the huge number of improvements
in GCC 10.

You may also want to check out our
<a href="porting_to.html">Porting to GCC 10</a> page and the
<a href="../onlinedocs/index.html#current">full GCC documentation</a>.

</p>

<p>Note: GCC 10 has not been released yet, so this document is
a work-in-progress.</p>

<!-- .................................................................. -->
<h2>Caveats</h2>
<ul>
  <li>
    The deprecated Profile Mode and <code>array_allocator</code> extensions
    have been removed from libstdc++.
  </li>
  <li>
    The non-standard <code>std::__is_nullptr_t</code> type trait is deprecated
    and will be removed from libstdc++ in a future release.
    The standard trait <code>std::is_null_pointer</code> should be instead.
  </li>
  <li>
    The minimum version of the <a href="https://www.mpfr.org">MPFR</a>
    library required for building GCC has been increased to version
    3.1.0 (released 2011-10-03).
  </li>
</ul>


<!-- .................................................................. -->
<h2 id="general">General Improvements</h2>

<p>The following built-in functions have been introduced.</p>
<ul>
  <li><code>__builtin_roundeven</code> for the corresponding function from
    ISO/IEC TS 18661.
  </li>
</ul>

<!-- .................................................................. -->
<h2 id="languages">New Languages and Language specific improvements</h2>

<!-- <h3 id="ada">Ada</h3> -->

<!-- <h3 id="brig">BRIG (HSAIL)</h3> -->

<!-- <h3 id="c-family">C family</h3> -->

<h3 id="c">C</h3>
<ul>
  <li>Several new features from the upcoming C2X revision of the ISO C
  standard are supported with <code>-std=c2x</code>
  and <code>-std=gnu2x</code>.  Some of these features are also
  supported as extensions when compiling for older language versions.
  In addition to the features listed, some features previously
  supported as extensions and now added to the C standard are enabled
  by default in C2X mode and not diagnosed with <code>-std=c2x
  -Wpedantic</code>.
  <ul>
    <li>The <code>[[]]</code> attribute syntax is supported, as in
    C++.  Existing attributes can be used with this syntax in forms
    such as <code>[[gnu::const]]</code>.  The standard
    attributes <code>[[deprecated]]</code>, <code>[[fallthrough]]</code>
    and <code>[[maybe_unused]]</code> are supported.</li>
    <li>UTF-8 character constants using the <code>u8''</code> syntax
    are supported.</li>
    <li><code>&lt;float.h&gt;</code> defines
    macros <code>FLT_NORM_MAX</code>, <code>DBL_NORM_MAX</code>
    and <code>LDBL_NORM_MAX</code>.</li>
    <li>When decimal floating-point arithmetic is
    supported, <code>&lt;float.h&gt;</code> defines
    macros <code>DEC32_TRUE_MIN</code>, <code>DEC64_TRUE_MIN</code>
    and <code>DEC128_TRUE_MIN</code>, in addition to the macros that
    were previously only defined if <code>__STDC_WANT_DEC_FP__</code>
    was defined before including <code>&lt;float.h&gt;</code>.</li>
    <li>In C2X mode, empty parentheses in a function definition give
    that function a type with a prototype for subsequent calls; other
    old-style function definitions are diagnosed by default in C2X
    mode.</li>
    <li>The <code>strftime</code> format checking supports
    the <code>%OB</code> and <code>%Ob</code> formats.</li>
    <li>In C2X mode, <code>-fno-fp-int-builtin-inexact</code> is
    enabled by default.</li>
  </ul></li>
</ul>

<h3 id="cxx">C++</h3>
<ul>
  <li>Several C++20 features have been implemented:
  <ul>
    <li>P1668R1, Permitting Unevaluated inline-assembly in constexpr Functions</li>
    <li>P1161R3, Deprecate <code>a[b,c]</code></li>
    <li>P0848R3, Conditionally Trivial Special Member Functions</li>
    <li>P1091R3, Extending structured bindings</li>
    <li>P1143R2, Adding the <code>constinit</code> keyword</li>
    <li>P1152R4, Deprecating <code>volatile</code></li>
    <li>P0388R4, Permit conversions to arrays of unknown bound</li>
    <li>P0784R7, <code>constexpr new</code></li>
    <li>Concepts, including P0734R0, P0857R0, P1084R2, P1141R2, P0848R3, P1616R1, P1452R2</li>
    <li>P1301R4, <code>[[nodiscard("with reason")]]</code></li>
    <li>P1814R0, class template argument deduction for alias templates</li>
    <li>P1816R0, class template argument deduction for aggregates</li>
    <li>P0960R3, Parenthesized initialization of aggregates</li>
    <li>P1331R2, Allow trivial default initialization in constexpr contexts</li>
  </ul>  
  </li>
  <li>Several C++ Defect Reports have been resolved, e.g.:
  <ul>
    <li>DR 1560, lvalue-to-rvalue conversion in <code>?:</code></li>
    <li>DR 1813, <code>__is_standard_layout</code> for a class with repeated
	bases</li>
    <li>DR 2094, volatile scalars are trivially copyable,</li>
    <li>DR 2096, constraints on literal unions</li>
    <li>DR 2413, <code>typename</code> in <code>conversion-function-id</code>s</li>
    <li>DR 2352, Similar types and reference binding</li>
    <li>DR 1601, Promotion of enumeration with fixed underlying type</li>
    <li>DR 330, Qualification conversions and pointers to arrays of pointers</li>
    <li>DR 1307, Overload resolution based on size of array
	<code>initializer-list</code></li>
  </ul>  
  </li>
  <li>
    G++ can now detect modifying constant objects in constexpr evaluation
    (which is undefined behavior).
  </li>
  <li>
    G++ no longer emits bogus <code>-Wsign-conversion</code> warnings with explicit
    casts.
  </li>
  <li>
    Narrowing is now detected in more contexts (e.g., <code>case</code>
    values).
  </li>
  <li>
    Memory consumption of the compiler has been reduced in constexpr evaluation.
  </li>
  <li>
    The <code>noexcept-specifier</code> is now properly treated as a
    <em>complete-class context</em> as per
    <a href="http://eel.is/c++draft/class.mem#def:complete-class_context">
    [class.mem]</a>.
  </li>
  <li>
    The attribute <code>deprecated</code> can now be used on
    <code>namespace</code>s too.
  </li>
</ul>

<h4 id="libstdcxx">Runtime Library (libstdc++)</h4>
<ul>
  <li>Improved C++2a support, including:
    <ul>
      <li> <code>std::span</code> (thanks to JeanHeyd Meneide). </li>
      <li>
        Constexpr support in <code>&lt;algorithm&gt;</code> and elsewhere
        (thanks to Edward Smith-Rowland).
      </li>
      <li>
        <code>&lt;stop_token&gt;</code> and <code>std::jthread</code>
        (thanks to Thomas Rodgers).
      </li>
      <li>
        <code>std::atomic_ref</code> and
        <code>std::atomic&lt;</code><i>floating point</i><code>&gt;</code>.
      </li>
      <li> <code>std::ssize</code>, <code>std::to_array</code>. </li>
      <li>
        <code>&lt;concepts&gt;</code> and some parts of
        <code>&lt;ranges&gt;</code>.
      </li>
      <li> <code>&lt;compare&gt;</code>. </li>
      <li> <code>&lt;numbers&gt;</code>. </li>
    </ul>
  </li>
  <li>
    Reduced header dependencies, leading to faster compilation for some code.
  </li>
</ul>

<h3 id="fortran">Fortran</h3>
<ul>
  <li><code>use_device_addr</code> of version 5.0 of the
      <a href="https://www.openmp.org/specifications/">OpenMP specification</a>
      is now supported. Note that otherwise OpenMP 4.5 is partially supported
      in the Fortran compiler; the largest missing item is structure element
      mapping.
  </li>
  <li>
    The default buffer size for I/O using unformatted files has been
    increased to 1048576.  The buffer size for can now be set at
    runtime via the environment
    variables <code>GFORTRAN_FORMATTED_BUFFER_SIZE</code> and
    <code>GFORTRAN_UNFORMATTED_BUFFER_SIZE</code> for formatted
    and unformatted files, respectively.
  </li>
  <li>
    Mismatches between actual and dummy argument lists in a single
    file are now rejected with an error. Use the new
    option <code>-fallow-argument-mismatch</code> to turn these
    errors into warnings; this option is implied
    with <code>-std=legacy</code>.  <code>-Wargument-mismatch</code>
    has been removed.
  </li>
  <li>
    Legacy extensions:
    <ul>
      <li>
        For formatted input/output, if the explicit widths after the data-edit
        descriptors <code>I</code>, <code>F</code> and <code>G</code> have been
        omitted, default widths are used.
      <li>
        A blank format item at the end of a format specification, i.e. nothing
        following the final comma, is allowed.  Use the option
        <code>-fdec-blank-format-item</code>; this option is implied with
        <code>-fdec</code>.
      </li>
      <li>
        The existing support for <code>AUTOMATIC</code> and <code>STATIC</code>
        attributes has been extended to allow variables with the
        <code>AUTOMATIC</code> attribute to be used in <code>EQUIVALENCE</code>
        statements. Use <code>-fdec-static</code>; this option is implied by
        <code>-fdec</code>.
      </li>
      <li>
        Allow character literals in assignments and <code>DATA</code> statements
        for numeric (<code>INTEGER</code>, <code>REAL</code>, or
        <code>COMPLEX</code>) or <code>LOGICAL</code> variables.  Use the option
        <code>-fdec-char-conversions</code>; this option is implied with
        <code>-fdec</code>.
      </li>
      <li>
        DEC comparisons, i.e. allow Hollerith constants to be used in comparisons
        with <code>INTEGER</code>, <code>REAL</code>, <code>COMPLEX</code> and
        <code>CHARACTER</code> expressions. Use the option <code>-fdec</code>.
      </li>
    </ul>
  <li>
    Character type names in errors and warnings now include <code>len</code>
    in addition to <code>kind</code>; <code>*</code> is used for assumed
    length. The kind is omitted if it is the default kind. Examples:
    <code>CHARACTER(12)</code>, <code>CHARACTER(6,4)</code>.
  </li>
  <li>
    <code>CO_BROADCAST</code> now supports derived type variables including
    objects with allocatable components. In this case, the optional arguments
    <code>STAT=</code> and <code>ERRMSG=</code> are currently ignored.
  </li>

</ul>
<!-- <h3 id="go">Go</h3> -->

<!-- .................................................................. -->
<!-- <h2 id="jit">libgccjit</h2> -->

<!-- .................................................................. -->
<h2 id="targets">New Targets and Target Specific Improvements</h2>

<!-- <h3 id="aarch64">AArch64</h3> -->

<!-- <h3 id="arc">ARC</h3> -->

<h3 id="arm">ARM</h3>
<ul>
  <li>Support for the FDPIC ABI has been added. It uses 64-bit
  function descriptors to represent pointers to functions, and enables
  code sharing on MMU-less systems. The corresponding target triple is
  <code>arm-uclinuxfdpiceabi</code>, and the C library is uclibc-ng.
  </li>
</ul>
<!-- <h3 id="avr">AVR</h3> -->

<!-- <h3 id="hsa">Heterogeneous Systems Architecture</h3> -->

<h3 id="x86">IA-32/x86-64</h3>
<ul>
  <li>Support to expand <code>__builtin_roundeven</code> into the appropriate
    SSE 4.1 instruction has been added.
  </li>
  <li>GCC now supports the Intel CPU named Cooperlake through
    <code>-march=cooperlake</code>.
    The switch enables the AVX512BF16 ISA extensions.
  </li>
  <li>GCC now supports the Intel CPU named Tigerlake through
    <code>-march=tigerlake</code>.
    The switch enables the MOVDIRI MOVDIR64B AVX512VP2INTERSECT ISA extensions.
  </li>
</ul>

<!-- <h3 id="mips">MIPS</h3> -->

<!-- <h3 id="mep">MeP</h3> -->

<!-- <h3 id="msp430">MSP430</h3> -->

<!-- <h3 id="nds32">NDS32</h3> -->

<!-- <h3 id="nios2">Nios II</h3> -->

<!-- <h3 id="nvptx">NVPTX</h3> -->

<!-- <h3 id="hppa">PA-RISC</h3> -->

<!-- <h3 id="powerpc">PowerPC / PowerPC64 / RS6000</h3> -->

<h3 id="pru">PRU</h3>
<ul>
  <li>
    A new back end targeting TI PRU I/O processors has been contributed to GCC.
  </li>
</ul>

<!-- <h3 id="s390">S/390, System z, IBM z Systems</h3> -->

<!-- <h3 id="riscv">RISC-V</h3> -->

<!-- <h3 id="rx">RX</h3> -->

<!-- <h3 id="sh">SH</h3> -->

<!-- <h3 id="sparc">SPARC</h3> -->

<!-- <h3 id="Tile">Tile</h3> -->

<!-- .................................................................. -->
<h2 id="os">Operating Systems</h2>

<!-- <h3 id="aix">AIX</h3> -->

<!-- <h3 id="fuchsia">Fuchsia</h3> -->

<!-- <h3 id="dragonfly">DragonFly BSD</h3> -->

<!-- <h3 id="freebsd">FreeBSD</h3> -->

<!-- <h3 id="gnulinux">GNU/Linux</h3> -->

<!-- <h3 id="rtems">RTEMS</h3> -->

<!-- <h3 id="solaris">Solaris</h3> -->

<!-- <h3 id="vxmils">VxWorks MILS</h3> -->

<!-- <h3 id="windows">Windows</h3> -->


<!-- .................................................................. -->
<!-- <h2>Documentation improvements</h2> -->


<!-- .................................................................. -->
<!-- <h2 id="plugins">Improvements for plugin authors</h2> -->

<!-- .................................................................. -->
<h2>Other significant improvements</h2>
<ul>
  <li>
    To allow inline expansion of both <code>memcpy</code>
    and <code>memmove</code>, the existing <code>movmem</code> instruction
    patterns used for non-overlapping memory copies have been renamed to
    <code>cpymem</code>. The <code>movmem</code> name is now used
    for overlapping memory moves, consistent with the
    library functions <code>memcpy</code> and <code>memmove</code>.
  </li>
</ul>


<!-- .................................................................. -->
<!-- <h2><a name="10.1">GCC 10.1</a></h2> -->

</body>
</html>
