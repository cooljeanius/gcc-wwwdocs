<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>GCC 10 Release Series &mdash; Changes, New Features, and Fixes</title>
<link rel="stylesheet" type="text/css" href="https://gcc.gnu.org/gcc.css" />
</head>

<!-- GCC maintainers, please do not hesitate to contribute/update
     entries concerning those part of GCC you maintain!
-->

<body>
<h1>GCC 10 Release Series<br/>Changes, New Features, and Fixes</h1>

<p>
This page is a "brief" summary of some of the huge number of improvements
in GCC 10.

You may also want to check out our
<a href="porting_to.html">Porting to GCC 10</a> page and the
<a href="../onlinedocs/index.html#current">full GCC documentation</a>.

</p>

<p>Note: GCC 10 has not been released yet, so this document is
a work-in-progress.</p>

<!-- .................................................................. -->
<h2>Caveats</h2>
<ul>
  <li>
    The deprecated Profile Mode and <code>array_allocator</code> extensions
    have been removed from libstdc++.
  </li>
  <li>
    The non-standard <code>std::__is_nullptr_t</code> type trait is deprecated
    and will be removed from libstdc++ in a future release.
    The standard trait <code>std::is_null_pointer</code> should be instead.
  </li>
  <li>
    The minimum version of the <a href="https://www.mpfr.org">MPFR</a>
    library required for building GCC has been increased to version
    3.1.0 (released 2011-10-03).
  </li>
  <li>
    The automatic template instantiation at link time (<code>-frepo</code>)
    has been removed.
  </li>
</ul>


<!-- .................................................................. -->
<h2 id="general">General Improvements</h2>

<p>The following built-in functions have been introduced.</p>
<ul>
  <li><code>__builtin_roundeven</code> for the corresponding function from
    ISO/IEC TS 18661.
  </li>
  <li>
    A new option, <a href="https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-fno-allocation-dce"><code>-fallocation-dce</code></a>
    has been added. The option removes unneeded pairs of <code>new</code>
    and <code>delete</code> operators.
  </li>
  <li>
    Profile driven optimization improvements:
    <ul>
      <li>
        Using <a href="https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-fprofile-values"><code>-fprofile-values</code></a>,
        an instrumented binary can track multiple
        values (up to 4) for e.g. indirect calls and provide more precise profile information.
      </li>
    </ul>
  </li>
  <li>
    Link-time optimization improvements:
    <ul>
      <li>
        A new binary <a href="https://gcc.gnu.org/onlinedocs/gcc/lto-dump.html"><code>lto-dump</code></a>
        has been added.  The program can dump various
        information about a LTO bytecode object file.
      </li>
      <li>
        Parallel phase of the LTO can automatically detect a running make's jobserver
        or can fall back to number of available cores.
      </li>
      <li>
        The LTO bytecode can be compressed with
        <a href="https://facebook.github.io/zstd/"><code>zstd</code></a>
        algorithm.  Configure script can automatically detect the <code>zstd</code> support.
      </li>
    </ul>
  </li>
</ul>

<!-- .................................................................. -->
<h2 id="languages">New Languages and Language specific improvements</h2>

<!-- <h3 id="ada">Ada</h3> -->

<!-- <h3 id="brig">BRIG (HSAIL)</h3> -->

<!-- <h3 id="c-family">C family</h3> -->

<h3 id="c">C</h3>
<ul>
  <li>Several new features from the upcoming C2X revision of the ISO C
  standard are supported with <code>-std=c2x</code>
  and <code>-std=gnu2x</code>.  Some of these features are also
  supported as extensions when compiling for older language versions.
  In addition to the features listed, some features previously
  supported as extensions and now added to the C standard are enabled
  by default in C2X mode and not diagnosed with <code>-std=c2x
  -Wpedantic</code>.
  <ul>
    <li>The <code>[[]]</code> attribute syntax is supported, as in
    C++.  Existing attributes can be used with this syntax in forms
    such as <code>[[gnu::const]]</code>.  The standard
    attributes <code>[[deprecated]]</code>, <code>[[fallthrough]]</code>
    and <code>[[maybe_unused]]</code> are supported.</li>
    <li>UTF-8 character constants using the <code>u8''</code> syntax
    are supported.</li>
    <li><code>&lt;float.h&gt;</code> defines
    macros <code>FLT_NORM_MAX</code>, <code>DBL_NORM_MAX</code>
    and <code>LDBL_NORM_MAX</code>.</li>
    <li>When decimal floating-point arithmetic is
    supported, <code>&lt;float.h&gt;</code> defines
    macros <code>DEC32_TRUE_MIN</code>, <code>DEC64_TRUE_MIN</code>
    and <code>DEC128_TRUE_MIN</code>, in addition to the macros that
    were previously only defined if <code>__STDC_WANT_DEC_FP__</code>
    was defined before including <code>&lt;float.h&gt;</code>.</li>
    <li>In C2X mode, empty parentheses in a function definition give
    that function a type with a prototype for subsequent calls; other
    old-style function definitions are diagnosed by default in C2X
    mode.</li>
    <li>The <code>strftime</code> format checking supports
    the <code>%OB</code> and <code>%Ob</code> formats.</li>
    <li>In C2X mode, <code>-fno-fp-int-builtin-inexact</code> is
    enabled by default.</li>
  </ul></li>
</ul>

<h3 id="cxx">C++</h3>
<ul>
  <li>Several C++20 features have been implemented:
  <ul>
    <li>P1668R1, Permitting Unevaluated inline-assembly in constexpr Functions</li>
    <li>P1161R3, Deprecate <code>a[b,c]</code></li>
    <li>P0848R3, Conditionally Trivial Special Member Functions</li>
    <li>P1091R3, Extending structured bindings</li>
    <li>P1143R2, Adding the <code>constinit</code> keyword</li>
    <li>P1152R4, Deprecating <code>volatile</code></li>
    <li>P0388R4, Permit conversions to arrays of unknown bound</li>
    <li>P0784R7, <code>constexpr new</code></li>
    <li>Concepts, including P0734R0, P0857R0, P1084R2, P1141R2, P0848R3, P1616R1, P1452R2</li>
    <li>P1301R4, <code>[[nodiscard("with reason")]]</code></li>
    <li>P1814R0, class template argument deduction for alias templates</li>
    <li>P1816R0, class template argument deduction for aggregates</li>
    <li>P0960R3, Parenthesized initialization of aggregates</li>
    <li>P1331R2, Allow trivial default initialization in constexpr contexts</li>
    <li>P1327R1, Allowing dynamic_cast and polymorphic typeid in constexpr contexts</li>
  </ul>  
  </li>
  <li>Several C++ Defect Reports have been resolved, e.g.:
  <ul>
    <li>DR 1560, lvalue-to-rvalue conversion in <code>?:</code></li>
    <li>DR 1813, <code>__is_standard_layout</code> for a class with repeated
	bases</li>
    <li>DR 2094, volatile scalars are trivially copyable,</li>
    <li>DR 2096, constraints on literal unions</li>
    <li>DR 2413, <code>typename</code> in <code>conversion-function-id</code>s</li>
    <li>DR 2352, Similar types and reference binding</li>
    <li>DR 1601, Promotion of enumeration with fixed underlying type</li>
    <li>DR 330, Qualification conversions and pointers to arrays of pointers</li>
    <li>DR 1307, Overload resolution based on size of array
	<code>initializer-list</code></li>
  </ul>  
  </li>
  <li>
    G++ can now detect modifying constant objects in constexpr evaluation
    (which is undefined behavior).
  </li>
  <li>
    G++ no longer emits bogus <code>-Wsign-conversion</code> warnings with explicit
    casts.
  </li>
  <li>
    Narrowing is now detected in more contexts (e.g., <code>case</code>
    values).
  </li>
  <li>
    Memory consumption of the compiler has been reduced in constexpr evaluation.
  </li>
  <li>
    The <code>noexcept-specifier</code> is now properly treated as a
    <em>complete-class context</em> as per
    <a href="http://eel.is/c++draft/class.mem#def:complete-class_context">
    [class.mem]</a>.
  </li>
  <li>
    The attribute <code>deprecated</code> can now be used on
    <code>namespace</code>s too.
  </li>
</ul>

<h4 id="libstdcxx">Runtime Library (libstdc++)</h4>
<ul>
  <li>Improved C++2a support, including:
    <ul>
      <li> <code>std::span</code> (thanks to JeanHeyd Meneide). </li>
      <li>
        Constexpr support in <code>&lt;algorithm&gt;</code> and elsewhere
        (thanks to Edward Smith-Rowland).
      </li>
      <li>
        <code>&lt;stop_token&gt;</code> and <code>std::jthread</code>
        (thanks to Thomas Rodgers).
      </li>
      <li>
        <code>std::atomic_ref</code> and
        <code>std::atomic&lt;</code><i>floating point</i><code>&gt;</code>.
      </li>
      <li> <code>std::ssize</code>, <code>std::to_array</code>. </li>
      <li>
        <code>&lt;concepts&gt;</code> and some parts of
        <code>&lt;ranges&gt;</code>.
      </li>
      <li> <code>&lt;compare&gt;</code>. </li>
      <li> <code>&lt;numbers&gt;</code>. </li>
    </ul>
  </li>
  <li>
    Reduced header dependencies, leading to faster compilation for some code.
  </li>
</ul>

<h3 id="fortran">Fortran</h3>
<ul>
  <li><code>use_device_addr</code> of version 5.0 of the
      <a href="https://www.openmp.org/specifications/">OpenMP specification</a>
      is now supported. Note that otherwise OpenMP 4.5 is partially supported
      in the Fortran compiler; the largest missing item is structure element
      mapping.
  </li>
  <li>
    The default buffer size for I/O using unformatted files has been
    increased to 1048576.  The buffer size for can now be set at
    runtime via the environment
    variables <code>GFORTRAN_FORMATTED_BUFFER_SIZE</code> and
    <code>GFORTRAN_UNFORMATTED_BUFFER_SIZE</code> for formatted
    and unformatted files, respectively.
  </li>
  <li>
    Mismatches between actual and dummy argument lists in a single
    file are now rejected with an error. Use the new
    option <code>-fallow-argument-mismatch</code> to turn these
    errors into warnings; this option is implied
    with <code>-std=legacy</code>.  <code>-Wargument-mismatch</code>
    has been removed.
  </li>
  <li>
    At any optimization level except<code>-Os</code>, gfortran now
    uses inline packing for arguments instead of calling a library
    routine.  If the source contains a large number of arguments that
    need to be repacked, code size or time for compilation can become
    excessive. If that is the case, <code>-finline-arg-packing</code>
    can be used to disable inline argument packing.
  </li>
  <li>
    Legacy extensions:
    <ul>
      <li>
        For formatted input/output, if the explicit widths after the data-edit
        descriptors <code>I</code>, <code>F</code> and <code>G</code> have been
        omitted, default widths are used.
      <li>
        A blank format item at the end of a format specification, i.e. nothing
        following the final comma, is allowed.  Use the option
        <code>-fdec-blank-format-item</code>; this option is implied with
        <code>-fdec</code>.
      </li>
      <li>
        The existing support for <code>AUTOMATIC</code> and <code>STATIC</code>
        attributes has been extended to allow variables with the
        <code>AUTOMATIC</code> attribute to be used in <code>EQUIVALENCE</code>
        statements. Use <code>-fdec-static</code>; this option is implied by
        <code>-fdec</code>.
      </li>
      <li>
        Allow character literals in assignments and <code>DATA</code> statements
        for numeric (<code>INTEGER</code>, <code>REAL</code>, or
        <code>COMPLEX</code>) or <code>LOGICAL</code> variables.  Use the option
        <code>-fdec-char-conversions</code>; this option is implied with
        <code>-fdec</code>.
      </li>
      <li>
        DEC comparisons, i.e. allow Hollerith constants to be used in comparisons
        with <code>INTEGER</code>, <code>REAL</code>, <code>COMPLEX</code> and
        <code>CHARACTER</code> expressions. Use the option <code>-fdec</code>.
      </li>
    </ul>
  <li>
    Character type names in errors and warnings now include <code>len</code>
    in addition to <code>kind</code>; <code>*</code> is used for assumed
    length. The kind is omitted if it is the default kind. Examples:
    <code>CHARACTER(12)</code>, <code>CHARACTER(6,4)</code>.
  </li>
  <li>
    <code>CO_BROADCAST</code> now supports derived type variables including
    objects with allocatable components. In this case, the optional arguments
    <code>STAT=</code> and <code>ERRMSG=</code> are currently ignored.
  </li>

</ul>
<!-- <h3 id="go">Go</h3> -->

<!-- .................................................................. -->
<!-- <h2 id="jit">libgccjit</h2> -->

<!-- .................................................................. -->
<h2 id="targets">New Targets and Target Specific Improvements</h2>

<h3 id="arm-targets">AArch64 &amp; arm</h3>
<ul>
  <li>The AArch64 and arm ports now support condition flag output constraints
  in inline assembly, as indicated by the <code>__GCC_ASM_FLAG_OUTPUTS__</code>.
  On arm this feature is only available for A32 and T32 targets.
  Please refer to the documentation for more details. </li>
</ul>

<h3 id="aarch64">AArch64</h3>
<ul>
  <li> The <code>-mbranch-protection=pac-ret</code> option now accepts the
  optional argument <code>+b-key</code> extension to perform return address
  signing with the B-key instead of the A-key.
  </li>
  <li>The Transactional Memory Extension is now supported through ACLE
  intrinsics.  It can be enabled through the <code>+tme</code> option
  extension (for example, <code>-march=armv8.5-a+tme</code>).
  </li>
  <li>Initial autovectorization support for SVE2 has been added and can be
  enabled through the   <code>+sve2</code> option extension (for example,
  <code>-march=armv8.5-a+sve2</code>).  Additional extensions can be enabled
  through <code>+sve2-sm4</code>, <code>+sve2=aes</code>,
  <code>+sve2-sha3</code>, <code>+sve2-bitperm</code>.
  </li>
  <li> A number of features from the Armv8.5-a are now supported through ACLE
  intrinsics.  These include:
    <ul>
	<li>The random number instructions that can be enabled
	through the (already present in GCC 9.1) <code>+rng</code> option
	extension.</li>
	<li>Floating-point intrinsics to round to integer instructions from
	Armv8.5-a when targeting <code>-march=armv8.5-a</code> or later.</li>
	<li>Memory Tagging Extension intrinsics enabled through the
	<code>+memtag</code> option extension.</li>
    </ul>
  </li>
  <li> The option <code>-moutline-atomics</code> has been added to aid
  deployment of the Large System Extensions (LSE) on GNU/Linux systems built
  with a baseline architecture targeting Armv8-A.  When the option is
  specified code is emitted to detect the presence of LSE instructions at
  runtime and use them for standard atomic operations.
  For more information please refer to the documentation.
  </li>
  <li>
       Support has been added for the following processors
       (GCC identifiers in parentheses):
       <ul>
         <li>Arm Cortex-A77 (<code>cortex-a77</code>).</li>
	 <li>Arm Cortex-A76AE (<code>cortex-a76ae</code>).</li>
	 <li>Arm Cortex-A65 (<code>cortex-a65</code>).</li>
	 <li>Arm Cortex-A65AE (<code>cortex-a65ae</code>).</li>
	 <li>Arm Cortex-A34 (<code>cortex-a34</code>).</li>
       </ul>
       The GCC identifiers can be used
       as arguments to the <code>-mcpu</code> or <code>-mtune</code> options,
       for example: <code>-mcpu=cortex-a77</code> or
       <code>-mtune=cortex-a65ae</code> or as arguments to the equivalent target
       attributes and pragmas.
  </li>
</ul>

<!-- <h3 id="arc">ARC</h3> -->

<h3 id="arm">arm</h3>
<ul>
  <li>Support for the FDPIC ABI has been added. It uses 64-bit
  function descriptors to represent pointers to functions, and enables
  code sharing on MMU-less systems. The corresponding target triple is
  <code>arm-uclinuxfdpiceabi</code>, and the C library is uclibc-ng.
  </li>
  <li>Support has been added for the Arm EABI on NetBSD through the
  <code>arm*-*-netbsdelf-*eabi*</code> triplet.
  </li>
  <li>The handling of 64-bit integer operations has been significantly reworked
  and improved leading to improved performance and reduced stack usage when using
  64-bit integral data types.  The option <code>-mneon-for-64bits</code> is now
  deprecated and will be removed in a future release.</li>
  <li>
       Support has been added for the following processors
       (GCC identifiers in parentheses):
       <ul>
         <li>Arm Cortex-A77 (<code>cortex-a77</code>).</li>
	 <li>Arm Cortex-A76AE (<code>cortex-a76ae</code>).</li>
	 <li>Arm Cortex-M35P (<code>cortex-m35p</code>).</li>
       </ul>
       The GCC identifiers can be used
       as arguments to the <code>-mcpu</code> or <code>-mtune</code> options,
       for example: <code>-mcpu=cortex-a77</code> or
       <code>-mtune=cortex-m35p</code>.
  </li>
  <li>Support has been extended for the ACLE
  <a href="https://developer.arm.com/docs/101028/0009/data-processing-intrinsics">
  data-processing intrinsics</a> to include 32-bit SIMD, saturating arithmetic,
  16-bit multiplication and other related intrinsics aimed at DSP algorithm
  optimization.
  </li>
  <li>Support for <code>-mpure-code</code> in Thumb-1 (v6m) has been
  added: this M-profile feature is no longer restricted to targets
  with <code>MOVT</code>. For example, <code>-mcpu=cortex-m0</code>
  now supports this option.</li>
</ul>

<h3 id="avr">AVR</h3>
<ul>
  <li>Support for the XMEGA-like devices
    <blockquote>
      ATtiny202, ATtiny204, ATtiny402, ATtiny404, ATtiny406, ATtiny804,
      ATtiny806, ATtiny807, ATtiny1604, ATtiny1606, ATtiny1607, ATmega808,
      ATmega809, ATmega1608, ATmega1609, ATmega3208, ATmega3209,
      ATmega4808, ATmega4809
    </blockquote>
    has been added.
  </li>
  <li>
    A new command-line option <code>-nodevicespecs</code> has been added.
    It allows to provide a custom device-specs file by means of
    <blockquote><code>
	avr-gcc -nodevicespecs -specs=<em>my-spec-file</em> &lt;options&gt;
    </code></blockquote>
    and without the need to provide options <code>-B</code> and
    <code>-mmcu=</code>.
    See
    <a href="https://gcc.gnu.org/onlinedocs/gcc/AVR-Options.html#index-nodevicespecs">AVR
      command-line options</a> for details.
    This feature is also available in GCC 9.3+ and GCC 8.4+.
  </li>
  <li>
    New command-line options <code>-mdouble=[32,64]</code> and
    <code>-mlong-double=[32,64]</code> have been added.  They allow
    to choose the size (in bits) of the <code>double</code> and
    <code>long double</code> types, respectively.  Whether or not the
    mentioned layouts are available, whether the options act
    as a multilib option, and the default for either option
    are controlled by the new
    <a href="https://gcc.gnu.org/install/configure.html#avr">AVR configure
      options</a>
    <code>--with-double=</code> and <code>--with-long-double=</code>.
  </li>
  <li>
    A new configure option <code>--with-libf7=</code> has been added.
    It controls to which level avr-libgcc provides 64-bit floating point
    support by means of
    <a href="https://gcc.gnu.org/wiki/avr-gcc#Libf7">Libf7</a>.
  </li>
  <li>
    A new configure option <code>--with-double-comparison=</code> has been
    added. It's unlikely you need to set this option by hand.
  </li>
</ul>

<!-- <h3 id="hsa">Heterogeneous Systems Architecture</h3> -->

<h3 id="x86">IA-32/x86-64</h3>
<ul>
  <li>Support to expand <code>__builtin_roundeven</code> into the appropriate
    SSE 4.1 instruction has been added.
  </li>
  <li>GCC now supports the Intel CPU named Cooperlake through
    <code>-march=cooperlake</code>.
    The switch enables the AVX512BF16 ISA extensions.
  </li>
  <li>GCC now supports the Intel CPU named Tigerlake through
    <code>-march=tigerlake</code>.
    The switch enables the MOVDIRI MOVDIR64B AVX512VP2INTERSECT ISA extensions.
  </li>
</ul>

<!-- <h3 id="mips">MIPS</h3> -->

<!-- <h3 id="mep">MeP</h3> -->

<!-- <h3 id="msp430">MSP430</h3> -->

<!-- <h3 id="nds32">NDS32</h3> -->

<!-- <h3 id="nios2">Nios II</h3> -->

<!-- <h3 id="nvptx">NVPTX</h3> -->

<!-- <h3 id="hppa">PA-RISC</h3> -->

<!-- <h3 id="powerpc">PowerPC / PowerPC64 / RS6000</h3> -->

<h3 id="pru">PRU</h3>
<ul>
  <li>
    A new back end targeting TI PRU I/O processors has been contributed to GCC.
  </li>
</ul>

<!-- <h3 id="s390">S/390, System z, IBM z Systems</h3> -->

<!-- <h3 id="riscv">RISC-V</h3> -->

<!-- <h3 id="rx">RX</h3> -->

<!-- <h3 id="sh">SH</h3> -->

<!-- <h3 id="sparc">SPARC</h3> -->

<!-- <h3 id="Tile">Tile</h3> -->

<!-- .................................................................. -->
<h2 id="os">Operating Systems</h2>

<!-- <h3 id="aix">AIX</h3> -->

<!-- <h3 id="fuchsia">Fuchsia</h3> -->

<!-- <h3 id="dragonfly">DragonFly BSD</h3> -->

<!-- <h3 id="freebsd">FreeBSD</h3> -->

<!-- <h3 id="gnulinux">GNU/Linux</h3> -->

<!-- <h3 id="rtems">RTEMS</h3> -->

<!-- <h3 id="solaris">Solaris</h3> -->

<!-- <h3 id="vxmils">VxWorks MILS</h3> -->

<!-- <h3 id="windows">Windows</h3> -->


<!-- .................................................................. -->
<!-- <h2>Documentation improvements</h2> -->


<!-- .................................................................. -->
<!-- <h2 id="plugins">Improvements for plugin authors</h2> -->

<!-- .................................................................. -->
<h2>Other significant improvements</h2>
<ul>
  <li>
    To allow inline expansion of both <code>memcpy</code>
    and <code>memmove</code>, the existing <code>movmem</code> instruction
    patterns used for non-overlapping memory copies have been renamed to
    <code>cpymem</code>. The <code>movmem</code> name is now used
    for overlapping memory moves, consistent with the
    library functions <code>memcpy</code> and <code>memmove</code>.
  </li>
</ul>


<!-- .................................................................. -->
<!-- <h2><a name="10.1">GCC 10.1</a></h2> -->

</body>
</html>
