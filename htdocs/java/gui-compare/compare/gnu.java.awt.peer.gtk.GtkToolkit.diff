--- /home/tromey/gnu/Nightly/classpath/classpath/gnu/java/awt/peer/gtk/GtkToolkit.java	2004-07-23 02:23:49.000000000 -0600
+++ gnu/java/awt/peer/gtk/GtkToolkit.java	2004-07-23 02:21:45.000000000 -0600
@@ -266,7 +266,7 @@
   {
     if (useGraphics2D())
       return bufferedImageOrError(GdkPixbufDecoder.createBufferedImage (imagedata,
-                                                   imageoffset, 
+                                                                        imageoffset, 
                                                                         imagelength));
     else
       {
@@ -278,6 +278,17 @@
         return image;        
       }
   }
+  
+  /**
+   * Creates an ImageProducer from the specified URL. The image is assumed
+   * to be in a recognised format. 
+   *
+   * @param url URL to read image data from.
+   */  
+  public ImageProducer createImageProducer(URL url)
+  {
+    return new GdkPixbufDecoder(url);  
+  }
 
   public ColorModel getColorModel () 
   {
@@ -499,8 +510,12 @@
    */
   private FontPeer getFontPeer (String name, int style, int size) 
   {
-    GtkFontPeer fp = new GtkFontPeer (name, style, size);
-    return fp;
+    try {
+      GtkFontPeer fp = new GtkFontPeer (name, style, size);
+      return fp;
+    } catch (MissingResourceException ex) {
+      return null;
+    }
   }
 
   /**
