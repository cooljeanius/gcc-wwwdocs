--- /home/tromey/gnu/Nightly/classpath/classpath/gnu/java/awt/peer/gtk/GtkMainThread.java	2004-07-10 02:21:48.000000000 -0600
+++ gnu/java/awt/peer/gtk/GtkMainThread.java	2003-01-06 20:37:27.000000000 -0700
@@ -43,18 +43,7 @@
   private static Thread mainThread = null;
   private static Object mainThreadLock = new Object();
 
-  // Whether the gtk+ subsystem has been initialized.
-  private boolean gtkInitCalled = false;
-
-  /**
-   * Call gtk_init.  It is very important that this happen before any other
-   * gtk calls.
-   *
-   * @param portableNativeSync 1 if the Java property
-   * gnu.classpath.awt.gtk.portable.native.sync is set to "true".  0 if it is
-   * set to "false".  -1 if unset.
-   */
-  static native void gtkInit(int portableNativeSync);
+  static native void gtkInit();
   native void gtkMain();
   
   public GtkMainThread() 
@@ -70,38 +59,18 @@
     synchronized (this) 
       {
 	mainThread.start();
-	
-	while (!gtkInitCalled)
-	  {
-	    try
-	      {
-		wait();
-	      }
-	    catch (InterruptedException e) { }
-	  }
+	try {
+	  wait();
+	} catch (InterruptedException e) { }
       }
   }
   
   public void run() 
   {
-    /* Pass the value of the gnu.classpath.awt.gtk.portable.native.sync system
-     * property to C. */ 
-    int portableNativeSync;     
-    String portNatSyncProp = 
-      System.getProperty("gnu.classpath.awt.gtk.portable.native.sync");
-
-    if (portNatSyncProp == null)
-      portableNativeSync = -1;  // unset
-    else if (Boolean.valueOf(portNatSyncProp).booleanValue())
-      portableNativeSync = 1;   // true
-    else
-      portableNativeSync = 0;   // false
-    
     synchronized (this) 
       {
-	gtkInit(portableNativeSync);
-	gtkInitCalled = true;
-	notifyAll();
+	gtkInit();
+	notify();
       }
     gtkMain();
   }
