<html>

<head>
<title>GCJ - Contibuting</title>
</head>

<body>

<GCJNAV>

<br><br>
<h1>Contributing to the GCJ Project</h1>

<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
 Project Ideas
 </th>
</tr>
</table>
<br>

<p>We've started maintaining a list of <a href="projects.html">useful
projects</a>.

<p>

<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
 Coding Standards
 </th>
</tr>
</table>
<br>

  <p>All contributions must conform to the <a
  href="http://www.gnu.ai.mit.edu/prep/standards_toc.html">GNU Coding
  Standards</a>.  Submissions which do not conform to the standards will
  be returned with a request to reformat the changes.

  <p>Note that the GNU Coding Standards do not actually cover Java
  programming style.  libgcj largely uses the obvious extrapolation
  from the GNU C style, but there are some differences.

  <p>The changes are something like this:
  <ul>
  <li> Open braces go on a new line (like GNU C style)

  <li> Two space indent for methods and inner classes

  <li> <tt>if</tt>, <tt>try</tt>, <tt>for</tt>, and
    <tt>synchronized</tt> blocks are indented four spaces (the braces are
    indented two spaces, then the code an additional two spaces)

  <li> The open brace for a method body is indented only as far as the
    method header
  </ul>

  <p>

<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
  Copyright Assignment
 </th>
</tr>
</table>
<br>

  <p>Before we can accept code contributions from you, we need a
  copyright assignment form filled out.  See <a
  href="../contribute.html">the GCC contribute page</a> for
  information on how to do this. You should probably CC
  <a href="mailto:assignments@gnu.org"><tt>assignments@gnu.org</tt></a> with 
  your request.</p>

<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
 Submitting Patches
 </th>
</tr>
</table>
<br>

  <p>Every patch must have several pieces of information before we can
  properly evaluate it.

  <ul>
  <li> A description of the bug and how your patch fixes this bug.  For
       new features a description of the feature and your implementation.
  <li> A ChangeLog entry as plaintext; see the various ChangeLog files
       for format and content.<br>
       Note that, unlike some other projects, we do require ChangeLogs
       also for documentation (i.e., .texi files).
  <li> The patch itself.  If you are accessing the
       CVS repository at Red Hat, use &quot;cvs update; cvs diff -c3p&quot;;
       else, use &quot;diff -c3p OLD NEW&quot; or &quot;diff -up OLD NEW&quot;.
       If your version of diff does not support these options, then get the
       latest version of GNU diff.
  </ul>

    <p>Send <tt>libgcj</tt>patches to <a
	href="mailto:java-patches@gcc.gnu.org">the patch mailing
	list</a>.  This list is <a href="http://gcc.gnu.org/ml/java-patches/">archived</a>.
    <p>Patches to the gcj front end -- the <tt>gcc/java</tt> directory --
       should be sent to <a href="mailto:gcc-patches@gcc.gnu.org">the gcc
       patch mailing list</a>.  See <a
       href="../contribute.html">the GCC contribution
       instructions</a> for more information.

  <p>

<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
  Checkins and Gnats
 </th>
</tr>
</table>
<br>

    <p>If you have direct checkin access for libgcj (meaning write
    permission to the gcc repository as well as permission to commit
    your patch to libgcj), please make sure that your checkins follow
    the standard checkin rules.

    <p>First, always make ChangeLog entries.  This is not negotiable;
      a checkin without a ChangeLog entry will be reverted.  If the
      checkin fixes a bug in Gnats, note this in the entry.

    <p>The commit message given to cvs should be the ChangeLog entry.
      If you wrote the entry (your name is at the top), then don't
      include the header.  If someone else wrote the entry, do include
      the header.  It is customary to make the <tt>cvs commit</tt> log
      message the same as the ChangeLog entry.

    <p>If your change fixes a PR, put the text (e.g.)
      ``<tt>Fixes PR java/58</tt>'' into the ChangeLog entry and into the
      cvs commit message.  This will cause an automatic message to be
      sent to Gnats to record the commit in the PR.

    <p>After checking in a fix which fixes a PR, put the PR into
      ``feedback'' mode.  This will send email to the bug's
      originator.  In the change message ask them to try the fix and
      report back.

    <p>Once the originator reports back, or after some suitable amount
      of time (less time if you are absolutely sure, beyond any shadow
      of a doubt, that the bug has been fixed) close the PR.

    <p>
<br>
<table border="0" cellpadding="4" width="95%">
<tr bgcolor="#b0d0ff">
 <th align="left">
  <a name=Testing>Testing</a>
 </th>
</tr>
</table>
<br>

  We're accepting test case patches.<br>

<ul>
  <li>Put the <tt>.java</tt> file in
      <tt>libjava/testsuite/libjava.compile</tt>
      (if it is an expected compiler failure or other compile-time test --
      run-time tests usually go in <tt>libjava.lang</tt>)

  <li>If the file is "<tt>foo.java</tt>" make a "<tt>foo.xfail</tt>" file.
      For an expected failure the only thing in there should be
      "<tt>shouldfail</tt>"

  <li>If the test case matches a Java PR, it is customary to name it after
      the PR number.

  <li>Send the patch to java-patches and then commit of you're allowed to.
</ul>

<p>

There is also some documentation on <a href="test.html">how to run
test cases</a>.  This covers both our built-in tests and extra test
suites we use.

</GCJNAV>

</body>
</html>
