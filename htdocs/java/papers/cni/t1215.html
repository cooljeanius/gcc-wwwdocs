<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Arrays</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="The Cygnus Native Interface for C++/Java Integration"
HREF="t1.html"><LINK
REL="PREVIOUS"
TITLE="Objects and Classes"
HREF="t1178.html"><LINK
REL="NEXT"
TITLE="Methods"
HREF="t1262.html"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Cygnus Native Interface for C++/Java Integration</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="t1178.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>The Cygnus Native Interface for C++/Java Integration</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="t1262.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="AEN215"
>Arrays</A
></H1
><P
>While in many ways Java is similar to C and C++,
it is quite different in its treatment of arrays.
C arrays are based on the idea of pointer arithmetic,
which would be incompatible with Java's security requirements.
Java arrays are true objects (array types inherit from
<TT
CLASS="LITERAL"
>java.lang.Object</TT
>).  An array-valued variable
is one that contains a reference (pointer) to an array object.</P
><P
>Referencing a Java array in C++ code is done using the
<TT
CLASS="LITERAL"
>JArray</TT
> template, which as defined as follows:
<PRE
CLASS="PROGRAMLISTING"
>class __JArray : public java::lang::Object
{
public:
  int length;
};

template&#60;class T&#62;
class JArray : public __JArray
{
  T data[0];
public:
  T&#38; operator[](jint i) { return data[i]; }
};</PRE
></P
><P
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><CODE
CLASS="FUNCDEF"
>template&#60;class T&#62;  T *elements</CODE
>(JArray&#60;T&#62; &#38;array);<P
></P
></DIV
>
   This template function can be used to get a pointer to the
   elements of the <TT
CLASS="PARAMETER"
><I
>array</I
></TT
>.
   For instance, you can fetch a pointer
   to the integers that make up an <TT
CLASS="LITERAL"
>int[]</TT
> like so:
<PRE
CLASS="PROGRAMLISTING"
>extern jintArray foo;
jint *intp = elements (foo);</PRE
>
The name of this function may change in the future.</P
><P
>There are a number of typedefs which correspond to typedefs from JNI.
Each is the type of an array holding objects of the appropriate type:
<PRE
CLASS="PROGRAMLISTING"
>typedef __JArray *jarray;
typedef JArray&#60;jobject&#62; *jobjectArray;
typedef JArray&#60;jboolean&#62; *jbooleanArray;
typedef JArray&#60;jbyte&#62; *jbyteArray;
typedef JArray&#60;jchar&#62; *jcharArray;
typedef JArray&#60;jshort&#62; *jshortArray;
typedef JArray&#60;jint&#62; *jintArray;
typedef JArray&#60;jlong&#62; *jlongArray;
typedef JArray&#60;jfloat&#62; *jfloatArray;
typedef JArray&#60;jdouble&#62; *jdoubleArray;</PRE
></P
><P
> You can create an array of objects using this function:
<DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><CODE
CLASS="FUNCDEF"
>jobjectArray JvNewObjectArray</CODE
>(jint length, jclass klass, jobject init);<P
></P
></DIV
>
   Here <TT
CLASS="PARAMETER"
><I
>klass</I
></TT
> is the type of elements of the array;
   <TT
CLASS="PARAMETER"
><I
>init</I
></TT
> is the initial
   value to be put into every slot in the array.</P
><P
>For each primitive type there is a function which can be used
   to create a new array holding that type.  The name of the function
   is of the form
   `<TT
CLASS="LITERAL"
>JvNew&#60;<TT
CLASS="REPLACEABLE"
><I
>Type</I
></TT
>&#62;Array</TT
>',
   where `&#60;<TT
CLASS="REPLACEABLE"
><I
>Type</I
></TT
>&#62;' is the name of
   the primitive type, with its initial letter in upper-case.  For
   instance, `<TT
CLASS="LITERAL"
>JvNewBooleanArray</TT
>' can be used to create
   a new array of booleans.
   Each such function follows this example:
<DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><CODE
CLASS="FUNCDEF"
>jbooleanArray JvNewBooleanArray</CODE
>(jint length);<P
></P
></DIV
></P
><P
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><CODE
CLASS="FUNCDEF"
>jsize JvGetArrayLength</CODE
>(jarray array);<P
></P
></DIV
>
   Returns the length of <TT
CLASS="PARAMETER"
><I
>array</I
></TT
>.</P
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="t1178.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="t1.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="t1262.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Objects and Classes</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Methods</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>