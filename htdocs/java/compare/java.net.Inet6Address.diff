--- /home/tromey/gnu/Nightly/classpath/classpath/java/net/Inet6Address.java	2004-11-17 02:24:08.000000000 -0700
+++ java/net/Inet6Address.java	2004-10-28 02:16:11.000000000 -0600
@@ -207,11 +207,18 @@
     for (int i = 0; i < 16; i += 2)
       {
 	int x = ((ipaddress[i] & 0xFF) << 8) | (ipaddress[i + 1] & 0xFF);
+	boolean empty = sbuf.length() == 0;
 
-	if (i > 0)
+	if (empty)
+	  {
+	    if (i > 0)
+	      sbuf.append("::");
+	  }
+	else
 	  sbuf.append(':');
 
-	sbuf.append(Integer.toHexString(x));
+	if (x != 0 || i >= 14)
+	  sbuf.append(Integer.toHexString(x));
       }
 
     return sbuf.toString();
