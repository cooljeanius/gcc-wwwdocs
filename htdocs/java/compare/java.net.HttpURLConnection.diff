--- /home/tromey/gnu/classpath/classpath/java/net/HttpURLConnection.java	Mon Dec 30 15:39:05 2002
+++ java/net/HttpURLConnection.java	Tue Dec 10 19:20:31 2002
@@ -142,11 +142,6 @@
    * a conditional GET.
    */
   public static final int HTTP_NOT_MODIFIED = 304;
-
-  /**
-   * The requested resource needs to be accessed through a proxy.
-   */
-  public static final int HTTP_USE_PROXY = 305;
   
   
   /* HTTP Client Error Response Codes */
@@ -255,7 +250,7 @@
    * The server does not support the requested functionality.  
    * @since 1.3
    */
-  public static final int HTTP_NOT_IMPLEMENTED = 501;
+  static final int HTTP_NOT_IMPLEMENTED = 501;
 
   /**
    * The proxy encountered a bad response from the server it was proxy-ing for
@@ -464,36 +459,31 @@
       connect();
       
     gotResponseVals = true;
+    // Response is the first header received from the connection.
+    String respField = getHeaderField(0);
+    
+    if (respField == null || ! respField.startsWith("HTTP/"))
+      {
+	// Set to default values on failure.
+        responseCode = -1;
+	responseMessage = null;
+	return;
+      }
 
-    // If responseCode not yet explicitly set by subclass
-    if (responseCode == -1)
+    int firstSpc, nextSpc;
+    firstSpc = respField.indexOf(' ');
+    nextSpc = respField.indexOf(' ', firstSpc + 1);
+    responseMessage = respField.substring(nextSpc + 1);
+    String codeStr = respField.substring(firstSpc + 1, nextSpc);
+    try
+      {
+	responseCode = Integer.parseInt(codeStr);
+      }
+    catch (NumberFormatException e)
       {
-	// Response is the first header received from the connection.
-	String respField = getHeaderField(0);
-	
-	if (respField == null || ! respField.startsWith("HTTP/"))
-	  {
-	    // Set to default values on failure.
-	    responseCode = -1;
-	    responseMessage = null;
-	    return;
-	  }
-
-	int firstSpc, nextSpc;
-	firstSpc = respField.indexOf(' ');
-	nextSpc = respField.indexOf(' ', firstSpc + 1);
-	responseMessage = respField.substring(nextSpc + 1);
-	String codeStr = respField.substring(firstSpc + 1, nextSpc);
-	try
-	  {
-	    responseCode = Integer.parseInt(codeStr);
-	  }
-	catch (NumberFormatException e)
-	  {
-	    // Set to default values on failure.
-	    responseCode = -1;
-	    responseMessage = null;
-	  }
+	// Set to default values on failure.
+        responseCode = -1;
+	responseMessage = null;
       }
   }
 
