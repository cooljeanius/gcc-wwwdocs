--- /home/tromey/gnu/classpath/classpath/java/security/Security.java	Mon Aug 19 13:47:07 2002
+++ java/security/Security.java	Tue Jan 22 15:40:30 2002
@@ -59,9 +59,8 @@
 
   static
   {
-    loadProviders(System.getProperty("java.home"),
-		  System.getProperty("java.vm.name"));
-    loadProviders(System.getProperty("gnu.classpath.home"), "classpath");
+    loadProviders(System.getProperty("java.vm.name"));
+    loadProviders("classpath");
   }
 
   // This class can't be instantiated.
@@ -69,13 +68,13 @@
   {
   }
 
-  private static void loadProviders(String dir, String vendor)
+  private static void loadProviders(String vendor)
   {
-    if (dir == null || vendor == null)
+    if (vendor == null)
       return;
 
     String separator = System.getProperty("file.separator");
-    String secfilestr = (dir +
+    String secfilestr = (System.getProperty("java.home") +
 			 separator + "lib" +
 			 separator + "security" +
 			 separator + vendor + ".security");
@@ -264,15 +263,15 @@
    */
   public static Provider getProvider(String name)
   {
-    Provider p;
+    Provider p = null;
     int max = providers.size ();
     for (int i = 0; i < max; i++)
       {
 	p = (Provider) providers.elementAt(i);
 	if (p.getName() == name)
-	  return p;
+	  break;
       }
-    return null;
+    return p;
   }
 
   /**
