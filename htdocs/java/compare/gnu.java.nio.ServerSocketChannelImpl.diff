--- /home/tromey/gnu/classpath/classpath/gnu/java/nio/ServerSocketChannelImpl.java	Mon Nov 18 04:26:03 2002
+++ gnu/java/nio/ServerSocketChannelImpl.java	Fri Feb 14 10:33:29 2003
@@ -49,21 +49,13 @@
 {
   ServerSocket sock_object;
   int fd;
-  int local_port;
+//   int local_port;
   boolean blocking = true;
   boolean connected = false;
-  InetSocketAddress sa;
-
-//   private static native int NioSocketAccept (ServerSocketChannelImpl server, 
-//                                              SocketChannelImpl s);
-
-  private static int NioSocketAccept (ServerSocketChannelImpl server, 
-                                      SocketChannelImpl s)
-  {
-    return 0;
-  }
+//   InetSocketAddress sa;
 
   protected ServerSocketChannelImpl (SelectorProvider provider)
+    throws IOException
   {
     super (provider);
     fd = SocketChannelImpl.SocketCreate ();
@@ -92,22 +84,23 @@
 	    }
   }
 
-  protected void implCloseSelectableChannel ()
+  protected void implCloseSelectableChannel () throws IOException
   {
     connected = false;
     SocketChannelImpl.SocketClose (fd);
     fd = SocketChannelImpl.SocketCreate ();
   }
 
-  protected void implConfigureBlocking (boolean block)
+  protected void implConfigureBlocking (boolean block) throws IOException
   {
+    blocking = block;
   }
 
   public SocketChannel accept ()
   {
     SocketChannelImpl result = new SocketChannelImpl (provider ());
     result.sa = new InetSocketAddress (0);
-    int res = NioSocketAccept (this, result);
+    //int res = SocketAccept (this,result);
     return result;
   }
 
