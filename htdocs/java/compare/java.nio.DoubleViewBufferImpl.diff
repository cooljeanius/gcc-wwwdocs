--- /home/tromey/gnu/Nightly/classpath/classpath/java/nio/DoubleViewBufferImpl.java	2004-02-12 02:22:34.000000000 -0700
+++ java/nio/DoubleViewBufferImpl.java	2004-02-17 02:18:13.000000000 -0700
@@ -46,11 +46,20 @@
   private boolean readOnly;
   private ByteOrder endian;
   
+  DoubleViewBufferImpl (ByteBuffer bb, int capacity)
+  {
+    super (capacity, capacity, 0, -1);
+    this.bb = bb;
+    this.offset = bb.position();
+    this.readOnly = bb.isReadOnly();
+    this.endian = bb.order();
+  }
+  
   public DoubleViewBufferImpl (ByteBuffer bb, int offset, int capacity,
                                int limit, int position, int mark,
                                boolean readOnly, ByteOrder endian)
   {
-    super (limit >> 3, limit >> 3, position >> 3, mark >> 3);
+    super (capacity, limit, position, mark);
     this.bb = bb;
     this.offset = offset;
     this.readOnly = readOnly;
