--- /home/tromey/gnu/Nightly/classpath/classpath/gnu/java/awt/peer/gtk/GtkComponentPeer.java	2003-12-03 02:20:01.000000000 -0700
+++ gnu/java/awt/peer/gtk/GtkComponentPeer.java	2003-12-31 02:18:35.000000000 -0700
@@ -48,6 +48,7 @@
 import java.awt.FontMetrics;
 import java.awt.Frame;
 import java.awt.Graphics;
+import java.awt.Graphics2D;
 import java.awt.GraphicsConfiguration;
 import java.awt.Image;
 import java.awt.Insets;
@@ -99,7 +100,8 @@
     insets = new Insets (0, 0, 0, 0);
   }
 
-  native void connectHooks ();
+  native void connectJObject ();
+  native void connectSignals ();
 
   protected GtkComponentPeer (Component awtComponent)
   {
@@ -114,7 +116,8 @@
       getArgs (awtComponent, args);
       args.setArgs (this);
 
-      connectHooks ();
+      connectJObject ();
+      connectSignals ();
 
       if (awtComponent.getForeground () != null)
 	setForeground (awtComponent.getForeground ());
@@ -146,7 +149,16 @@
 
   public Image createImage (int width, int height)
   {
-    GdkGraphics g = new GdkGraphics (width, height);
+    Graphics g;
+    if (GtkToolkit.useGraphics2D ())
+      {
+        Graphics2D g2 = new GdkGraphics2D (width, height);
+        g2.setBackground (getBackground ());
+        g = g2;
+      }
+    else
+      g = new GdkGraphics (width, height);
+
     return new GtkOffScreenImage (null, g, width, height);
   }
 
