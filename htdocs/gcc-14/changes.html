<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>GCC 14 Release Series &mdash; Changes, New Features, and Fixes</title>
<link rel="stylesheet" type="text/css" href="https://gcc.gnu.org/gcc.css">
</head>

<!-- GCC maintainers, please do not hesitate to contribute/update
     entries concerning those part of GCC you maintain!
-->

<body>
<h1>GCC 14 Release Series<br>Changes, New Features, and Fixes</h1>

<p>
This page is a "brief" summary of some of the huge number of improvements
in GCC 14.
You may also want to check out our
<a href="porting_to.html">Porting to GCC 14</a> page and the
<a href="../onlinedocs/index.html#current">full GCC documentation</a>.
</p>

<p>Note: GCC 14 has not been released yet, so this document is
a work-in-progress.</p>

<!-- .................................................................. -->
<h2>Caveats</h2>
<ul>
  <li><strong>C:</strong>
      Support for the GCC extension, a structure containing a C99 flexible array
      member, or a union containing such a structure, is not the last field of
      another structure, is deprecated. Refer to
      <a href="https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html">
      Zero Length Arrays</a>.
      Any code relying on this extension should be modifed to ensure that
      C99 flexible array members only end up at the ends of structures.
      Please use the warning option
      <a href="https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wflex-array-member-not-at-end"><code>-Wflex-array-member-not-at-end</code></a> to
      identify all such cases in the source code and modify them.
  </li>
  <li><a href="https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html"><code>-fcf-protection=[full|branch|return|none|check]</code></a>
      is refactored, to override <code>-fcf-protection</code>,
      <code>-fcf-protection=none</code> needs to be added and then
      with <code>-fcf-protection=xxx</code>.
  </li>
  <li>Support for the <code>ia64*-*-</code> target ports which have been
      unmaintained for quite a while has been declared obsolete in GCC 14.
      The next release of GCC will have their sources permanently removed.
  </li>
  <li><a href="https://gcc.gnu.org/onlinedocs/gcc/Static-Analyzer-Options.html"><code>-fanalyzer</code></a>
    is still only suitable for analyzing C code.
    In particular, using it on C++ is unlikely to give meaningful output.
  </li>
</ul>


<!-- .................................................................. -->
<h2 id="general">General Improvements</h2>

<ul>
  <li id="openmp"><a href="https://gcc.gnu.org/projects/gomp/">OpenMP</a>
  <ul>
    <li>
      The <a href="https://gcc.gnu.org/onlinedocs/libgomp/">GNU Offloading and
      Multi Processing Runtime Library Manual</a> has been updated and extended,
      improving especially the description of <abbr title="internal control
      variables">ICVs</abbr>, memory allocation, environment variables and OpenMP
      routines.
    </li>
    <li>
      The <code>requires</code> directive's <code>unified_address</code>
      requirement is now fulfilled by both AMD GCN and nvptx devices.
      AMD GCN and nvptx devices now support low-latency allocators as
      <a href="https://gcc.gnu.org/onlinedocs/libgomp/Offload-Target-Specifics.html"
      >detailed in the manual</a>. Initial support for pinned-memory
      allocators has been added and, on Linux,
      <a href="https://github.com/numactl/numactl">libnuma</a> is now used
      for allocators requesting the nearest-partition trait (both is described
      in the <a href="https://gcc.gnu.org/onlinedocs/libgomp/Memory-allocation.html"
      >memory allocation section of the manual</a>).
    </li>
    <li>OpenMP 5.0: The <code>allocate</code> directive is now
      supported for stack variables in C and Fortran, including the OpenMP 5.1
      <code>align</code> modifier. In C and C++ the <code>map</code> clause now
      accepts lvalue expressions. For Fortran, OpenMP allocators can now be
      used for allocatables and pointers using the <code>allocate</code>
      directive and its OpenMP 5.2 replacement, the <code>allocators</code>
      directive; files using this allocator and all files that might directly
      or indirectly (intrinisic assignment, <code>intent(out)</code>, ...)
      de- or reallocate such-allocated variables must be compiled with the
      <a href="https://gcc.gnu.org/onlinedocs/gfortran/Fortran-Dialect-Options.html#index-fopenmp-allocators"
      ><code>-fopenmp-allocators</code></a> option.
    </li>
    <li>
      OpenMP 5.1: Support was added for collapsing imperfectly nested loops and
      using <code>present</code> as map-type modifier and in
      <code>defaultmap</code>. The <code>indirect</code> clause is now
      supported. The performance of copying strided data from or to nvptx
      and AMD GPU devices using the OpenMP 5.1 routine
      <code>omp_target_memcpy_rect</code> has been improved.
    </li>
    <li>
      OpenMP 5.2: The <code>OMP_TARGET_OFFLOAD=mandatory</code> handling has
      been updated for the clarifications and changes of the 5.2 specification.
      For Fortran, the list of directives permitted in Fortran pure procedures
      was extended. Additionally, the spec change has been implemented for
      default implicit mapping of C/C++ pointers pointing to unmapped storage.
      The <code>destroy</code> clause now optionally accepts the depend object
      as argument.
    </li>
    <li>
      OpenMP 6.0 preview (TR11/TR12): The <code>decl</code> attribute is now
      supported in C++ 11 and the <code>directive</code>, <code>sequence</code>
      and <code>decl</code> attributes are now supported in C 23.
    </li>
  </ul>
  </li>
  <li id="openacc"><a href="https://gcc.gnu.org/wiki/OpenACC">OpenACC</a>
  <ul>
    <li>OpenACC 2.7: The <code>self</code> clause was added to be used on
      compute constructs and the <code>default</code> clause for data
      constructs.</li>
    <li>OpenACC 3.2: The following API routines are now available in
      Fortran using the <code>openacc</code> module or the
      <code>openacc_lib.h</code> header file:
      <code>acc_malloc</code>, <code>acc_free</code>,
      <code>acc_map_data</code>, <code>acc_unmap_data</code>,
      <code>acc_deviceptr</code>, <code>acc_hostptr</code>,
      <code>acc_memcpy_to_device</code>,
      <code>acc_memcpy_to_device_async</code>,
      <code>acc_memcpy_from_device</code>, and
      <code>acc_memcpy_from_device_async</code>.
  </ul>
  </li>
  <li>For offload-device code generated via OpenMP and OpenACC, the math
      and the Fortran runtime libraries will now automatically be linked,
      when the user or compiler links them on the host side. Thus, it is no
      longer required to explicitly pass <code>-lm</code> and/or
      <code>-lgfortran</code> to the offload-device linker using the <a
      href="https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-foffload-options"
      ><code>-foffload-options=</code></a> flag.
  </li>
  <li>
    New configure options: <code>--enable-host-pie</code>, to build the
    compiler executables as PIE; and <code>--enable-host-bind-now</code>,
    to link the compiler executables with <code>-Wl,-z,now</code> in order
    to enable additional hardening.
  </li>
  <li>
    New option
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#index-fhardened"><code>-fhardened</code></a>,
    an umbrella option that enables a set of hardening flags.
    The options it enables can be displayed using the
    <code>--help=hardened</code> option.
  </li>
  <li>
    New option
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#index-fharden-control-flow-redundancy"><code>-fharden-control-flow-redundancy</code></a>,
    to verify, at the end of functions, that the visited basic blocks
    correspond to a legitimate execution path, so as to detect and
    prevent attacks that transfer control into the middle of
    functions.
  </li>
  <li>
    New type attribute
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#index-hardbool-type-attribute"><code>hardbool</code></a>,
    for C and Ada.  Hardened
    booleans take user-specified representations for <code>true</code>
    and <code>false</code>, presumably with higher hamming distance
    than standard booleans, and get verified at every use, detecting
    memory corruption and some malicious attacks.
  </li>
  <li>
    New type attribute
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#index-strub-type-attribute"><code>strub</code></a>
    to control stack scrubbing
    properties of functions and variables.  The stack frame used by
    functions marked with the attribute gets zeroed-out upon returning
    or exception escaping.  Scalar variables marked with the attribute
    cause functions contaning or accessing them to get stack scrubbing
    enabled implicitly.
  </li>
  <li>
    New option
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-finline-stringops"><code>-finline-stringops</code></a>,
    to force inline
    expansion of <code>memcmp</code>, <code>memcpy</code>,
    <code>memmove</code> and <code>memset</code>, even when that is
    not an optimization, to avoid relying on library
    implementations.
  </li>
  <li>
    <!-- commit r14-4958-gcd7dadcd2759d1 -->
    New function attribute
    <a href="https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-null_005fterminated_005fstring_005farg-function-attribute"> <code>null_terminated_string_arg(<i>PARAM_IDX</i>)</code></a>
    for indicating parameters that are expected to be null-terminated
    strings.
  </li>
</ul>
<!-- .................................................................. -->
<h2 id="languages">New Languages and Language specific improvements</h2>

<!-- <h3 id="ada">Ada</h3> -->

<!-- <h3 id="c-family">C family</h3> -->

<h3 id="cxx">C++</h3>

<ul>
  <li>Several C++26 features have been implemented:
    <ul>
      <li><a href="https://wg21.link/P1854R4">P1854R4</a>, Making non-encodable
      string literals ill-formed (<a href="https://gcc.gnu.org/PR110341">PR110341</a>)
      </li>
      <li><a href="https://wg21.link/P2752R3">P2752R3</a>, Static storage for
      braced initializers (<a href="https://gcc.gnu.org/PR110346">PR110346</a>)
      </li>
      <li><a href="https://wg21.link/P2361R6">P2361R6</a>, Unevaluated strings
      (<a href="https://gcc.gnu.org/PR110342">PR110342</a>)
      </li>
      <li><a href="https://wg21.link/P2738R1">P2738R1</a>, constexpr cast from
      <code>void*</code>
      (<a href="https://gcc.gnu.org/PR110344">PR110344</a>)
      </li>
      <li><a href="https://wg21.link/P2741R3">P2741R3</a>, User-generated
      <code>static_assert</code> messages
      (<a href="https://gcc.gnu.org/PR110348">PR110348</a>)
      </li>
      <li><a href="https://wg21.link/P2169R4">P2169R4</a>, Placeholder variables
      with no name
      (<a href="https://gcc.gnu.org/PR110349">PR110349</a>)
      </li>
      <li><a href="https://wg21.link/P2864R2">P2864R2</a>, Removing deprecated
      arithmetic conversion on enumerations</li>
    </ul>
  </li>
  <li>Several C++23 features have been implemented:
    <ul>
      <li><a href="https://wg21.link/P2280R4">P2280R4</a>, Using unknown
      references in constant expressions
      (<a href="https://gcc.gnu.org/PR106650">PR106650</a>)
      </li>
      <li><a href="https://wg21.link/P2564R3">P2564R3</a>,
      <code>consteval</code> needs to propagate up
      (<a href="https://gcc.gnu.org/PR107687">PR107687</a>)
      </li>
      <li><a href="https://wg21.link/P2582R1">P2582R1</a>,
      Class template argument deduction from inherited constructors
      (<a href="https://gcc.gnu.org/PR106653">PR106653</a>)
      </li>
    </ul>
  </li>
  <li>Several C++ Defect Reports have been resolved, e.g.:
    <ul>
      <li><a href="https://wg21.link/cwg976">DR 976</a>,
      Deduction for <code>const T&</code> conversion operators</li>
      <li><a href="https://wg21.link/cwg2406">DR 2406</a>,
      <code>[[fallthrough]]</code> attribute and iteration statements</li>
      <li><a href="https://wg21.link/cwg2543">DR 2543</a>,
      <code>constinit</code> and optimized dynamic initialization</li>
    </ul>
  </li>
  <li>
    <!-- commit r14-4388-g1c45319b66edc9 -->
    When a diagnostic occurrs involving a C++ template,
    GCC will now quote the source code of the context at which
    the template is instantiated ("<code>required from here</code>"),
    rather than just print filename and line/column numbers.
  </li>
</ul>

<h4 id="libstdcxx">Runtime Library (libstdc++)</h4>

<ul>
  <li>
    The <code>libstdc++exp.a</code> library now includes all the Filesystem TS
    symbols from the <code>libstdc++fs.a</code> library.
    The experimental symbols for the C++23 <code>std::stacktrace</code> class
    are also in <code>libstdc++exp.a</code>, replacing the
    <code>libstdc++_libbacktrace.a</code> library that GCC 13 provides.
    This means that <code>-lstdc++exp</code> is the only library needed for
    all experimental libstdc++ features.
  </li>
  <li>Improved experimental support for C++20, including:
    <ul>
    <li><code>std::chrono::parse</code>.</li>
    <li>Unicode-aware string handling in <code>std::format</code>.</li>
    </ul>
  </li>
  <li>Improved experimental support for C++23, including:
    <ul>
    <li>The <code>std::ranges::to</code> function for converting
      ranges to containers.
    </li>
    <li>The <code>std::generator</code> view for getting results from
      coroutines.
    </li>
    <li>The <code>&lt;stacktrace&gt;</code> header is supported by default.
    </li>
    <li><code>std::print</code> and <code>std::println</code>
      (requires linking with <code>-lstdc++exp</code> on Windows).
    </li>
    <li>Formatters for <code>std::thread::id</code> and
      <code>std::stacktrace</code>.
    </li>
    <li>Smart pointer adaptors, <code>std::out_ptr</code> and
      <code>std::inout_ptr</code>.
    </li>
    <li>Some range adaptors now support move-only types.</li>
    </ul>
  </li>
  <li>Experimental support for C++26, including:
    <ul>
    <li>Native handles for <code>filebuf</code>, <code>fstream</code>, etc.</li>
    <li>Functions for saturation arithmetic on integers.</li>
    <li><code>std::to_string</code> now uses <code>std::format</code>.</li>
    <li>Enhanced formatting of pointers with <code>std::format</code>.</li>
    <li>The <code>std::runtime_format</code> function to allow using
      non-literal format strings with <code>std::format</code>.</li>
    <li>Testable result types for <code>&lt;charconv&gt;</code> functions.</li>
    <li>The <code>std::text_encoding</code> class for identifying character
      sets (requires linking with <code>-lstdc++exp</code> for some member
      functions).
    </li>
    </ul>
  </li>
  <li>Faster numeric conversions using <code>std::to_string</code> and
    <code>std::to_wstring</code>.
  </li>
  <li>Updated parallel algorithms that are compatible with oneTBB.</li>
  <li><code>std::numeric_limits&lt;_Float32&gt;</code> and
    <code>std::numeric_limits&lt;_Float64&gt;</code> are now defined
    for all standard modes, not only for C++23.
  </li>
  <li>Added missing functions for <code>float</code> and
    <code>long double</code> to <code>&lt;cmath&gt;</code>.
  </li>
  <li>Using the <code>std::setfill</code> manipulator with
    <code>std::istream</code> is deprecated.
  </li>
</ul>

<!-- <h3 id="d">D</h3> -->

<h3 id="fortran">Fortran</h3>
<ul>
  <li>The compiler now accepts the <code>-std=f2023</code> option, which
    has been added in preparation of support of Fortran 2023.  This option
    increases the line-length limit for source in free-form to 10000, and
    statements may have up to 1 million characters.
  </li>
  <li> With the <code>-save-temps</code> option, preprocessed files
    with the <code>.fii</code> extension will be generated from
    free-form source files such as <code>.F90</code> and
    <code>.fi</code> from fixed-form files such as <code>.F</code>.
  </li>
</ul>
<!-- <h3 id="go">Go</h3> -->

<!-- .................................................................. -->
<h2 id="jit">libgccjit</h2>
<ul>
  <li>The libgccjit API gained 6 new entry points:
    <ul>
      <li>
	<!-- commit r14-3552-g29763b002459cb -->
	<a href="https://gcc.gnu.org/onlinedocs/jit/topics/types.html#c.gcc_jit_type_get_restrict"><code>gcc_jit_type_get_restrict</code></a>
	for adding <code>restrict</code> to types
	(<a href="https://gcc.gnu.org/onlinedocs/jit/topics/compatibility.html#libgccjit-abi-25"><code>LIBGCCJIT_ABI_25</code></a>).
      </li>
      <li>
	<!-- commit r14-7177-g109985343bcada -->
	4 functions for setting attributes on functions and variables
	(<a href="https://gcc.gnu.org/onlinedocs/jit/topics/compatibility.html#libgccjit-abi-26"><code>LIBGCCJIT_ABI_26</code></a>):
	<ul>
          <li>gcc_jit_function_add_attribute</li>
          <li>gcc_jit_function_add_string_attribute</li>
          <li>gcc_jit_function_add_integer_array_attribute</li>
          <li>gcc_jit_lvalue_add_string_attribute</li>
	</ul>
      </li>
      <li>
	<!-- commit r14-8760-g5d534a214bf966 -->
	<a href="https://gcc.gnu.org/onlinedocs/jit/topics/expressions.html#c.gcc_jit_context_new_sizeof"><code>gcc_jit_context_new_sizeof</code></a>
	for accessing the size of a type
	(<a href="https://gcc.gnu.org/onlinedocs/jit/topics/compatibility.html#libgccjit-abi-27"><code>LIBGCCJIT_ABI_27</code></a>).
      </li>
    </ul>
  </li>
</ul>

<!-- .................................................................. -->
<h2 id="targets">New Targets and Target Specific Improvements</h2>

<h3 id="aarch64">AArch64</h3>

<ul>
  <li>A number of new CPUs are supported through the <code>-mcpu</code> and
  <code>-mtune</code> options (GCC identifiers in parentheses).
    <ul>
      <li>Ampere-1B (<code>ampere1b</code>).</li>
      <li>Arm Cortex-A520 (<code>cortex-a520</code>).</li>
      <li>Arm Cortex-A720 (<code>cortex-a720</code>).</li>
      <li>Arm Cortex-X4 (<code>cortex-x4</code>).</li>
      <li>Microsoft Cobalt-100 (<code>cobalt-100</code>).</li>
    </ul></li>
    <li>Additionally, the identifiers <code>generic</code>,
    <code>generic-armv8-a</code> and <code>generic-armv9-a</code> are added
    as arguments to <code>-mcpu=</code> and <code>-mtune=</code> to optimize
    code generation aimed at a good blend of CPUs of a particular architecture
    version.  These tunings are also used as the default optimization targets
    when compiling with the <code>-march=armv8-a</code> or
    <code>-march=armv9-a</code> options and their point releases e.g.
    <code>-march=armv8.2-a</code> or <code>-march=armv9.3-a</code>.</li>

  <li>New features in the Arm architecture are supported in a number of ways:
    <ul>
      <li>Support is added for the Arm Streaming Matrix Extensions SME and SME2
      through the <code>+sme</code> and <code>+sme2</code> extensions to
      <code>-march=</code>.  In particular, this includes support for the Beta state
      of the <a href="https://github.com/ARM-software/acle/blob/main/main/acle.md#sme-language-extensions-and-intrinsics">
      SME ACLE</a> in the form of a new intrinsics <code>arm_sme.h</code>
      intrinsics header and a number of new keyword attributes to manage use
      of the new Streaming SVE state.  For more information please refer to the
      ACLE documentation.</li>
      <li>Libatomic is updated to implement 128-bit atomic operations
      locklessly on systems with <code>FEAT_LSE2</code>.</li>
      <li>Support for <code>FEAT_LRCPC3</code> is added through ACLE intrinsics in
      <code>arm_neon.h</code> header and enabled through the <code>+rcpc3</code>
      extension to <code>-march=</code>.</li>
    </ul></li>
   <li>As well as numerous AArch64 code generation improvements, the following
   optimization enhancements are noteworthy:
    <ul>
      <li>A new AArch64-specific register allocation pass is added.
      It runs in addition to standard register allocation.
      The pass's main purpose is to make use of strided vector register
      operands in SME instructions.  However, it can also remove
      redundant moves in normal Advanced SIMD and SVE code.
      The pass is controlled by the new option <code>-mearly-ra=</code>
      that takes the arguments <code>all, strided, none</code>.
      <code>-mearly-ra=all</code> is enabled by default at optimization levels
      <code>-O2</code> and above.</li>
      <li>A new optimization pass to fuse loads and stores to adjacent memory
      locations into load and store-pair AArch64 instructions.  The pass is
      enabled by default when compiling with optimization and runs twice in the
      optimization pipeline: before and after register allocation.  This can be
      controlled with the options <code>-mearly-ldp-fusion</code> and
      <code>-mlate-ldp-fusion</code>.</li>
    </ul></li>
  <li>Conformance with the ACLE specification is improved and a number of
  features aimed at helping developers deploy Arm architecture features are
  added:
    <ul>
      <li>Support for the Beta version of the
      <a href="https://github.com/ARM-software/acle/blob/main/main/acle.md#function-multi-versioning">
      Function Multiversioning Specification</a>.  This feature provides
      facilities to annotate functions with attributes that allow the compiler
      to generate multiple versions of the function, selected at runtime based
      on the architecture features available in the system.  Please refer to
      the ACLE specification for more details.</li>
      <li>Support for more ACLE intrinsics in the <code>arm_acle.h</code>
      header, including the
      <a href="https://github.com/ARM-software/acle/blob/main/main/acle.md#memory-prefetch-intrinsics">
      Memory prefetch intrinsics</a> and the
      <a href="https://github.com/ARM-software/acle/blob/main/main/acle.md#special-register-intrinsics">
      Special register intrinsics</a>.
      This also includes intrinsics for the extension to 128-bit system
      registers, enabled through the <code>+d128</code> extension to
      <code>-march=</code>.</li>
      <li>Intrinsics enabled by the <code>+dotprod</code>, <code>+fp16</code>,
      <code>+fp16fml</code>, <code>+i8mm</code>, <code>+sha3</code> and
      <code>+sm4</code> extensions to <code>-march=</code> no longer require
      <code>-march=armv8.2-a</code> or higher to be specified.  Likewise, the
      intrinsics enabled by <code>+memtag</code> no longer require
      <code>-march=armv8.5-a</code>.</li>
    </ul></li>
  <li>The option <code>-mtp=</code> is now supported for changing the TPIDR
   register used for TLS accesses.  For more details please refer to the
   <a href="https://gcc.gnu.org/onlinedocs/gcc/AArch64-Options.html">
   documentation</a>.</li>
</ul>

<h3 id="amdgcn">AMD Radeon (GCN)</h3>

<ul>
  <li>Initial support for the AMD Radeon <code>gfx1030</code> (RDNA2),
    <code>gfx1100</code> and <code>gfx1103</code> (RDNA3) devices has been
    added. LLVM 15+ (assembler and linker) is <a
    href="https://gcc.gnu.org/install/specific.html#amdgcn-x-amdhsa">required
    to support <code>GFX11</code></a>.
  <li>Improved register usage and performance on CDNA Instinct MI100
    and MI200 series devices.</li>
  <li>The default device architecture is now <code>gfx900</code> (Vega).</li>
  <li>
    Fiji (gfx803) device support is now deprecated and will be removed from
    a future release.  The default compiler configuration no longer uses Fiji
    as the default device, and no longer includes the Fiji libraries.  Both can
    be restored by configuring with
    <a href="https://gcc.gnu.org/install/specific.html#amdgcn-x-amdhsa">
      <code>--with-arch=fiji</code>
    </a>.
  </li>
</ul>

<!-- <h3 id="arc">ARC</h3> -->

<h3 id="arm">arm</h3>
<ul>
  <li>The Cortex-M52 CPU is now supported through the <code>cortex-m52</code>
      argument to the <code>-mcpu</code> and <code>-mtune</code> options.
  </li>
</ul>

<h3 id="avr">AVR</h3>
<ul>
  <li>On AVR64* and AVR128* devices, read-only data is now located in program
    memory per default and no more in RAM.
    <ul>
      <li>Only a 32&nbsp;KiB block of program memory can be used to store
	and access .rodata in that way. Which block is used can be selected
	by defining symbol <code>__flmap</code>.
	As an alternative, the byte address of the block can be specified
	by symbol <code>__RODATA_FLASH_START__</code> which takes
	precedence over <code>__flmap</code>.
	For example, linking with
	<code>-Wl,--defsym,__RODATA_FLASH_START__=32k</code>
	chooses the second 32&nbsp;KiB block.</li>
      <li>The default uses the last 32&nbsp;KiB block, which is also the
	hardware default for bit-field <code>NVMCTRL_CTRLB.FLMAP</code>.</li>
      <li>When a non-default block is used,
	then <code>NVMCTRL_CTRLB.FLMAP</code> must be initialized accordingly
	by hand, or AVR-LibC v2.2 that implements&nbsp;<a
	href="https://github.com/avrdudes/avr-libc/issues/931">#931</a>
	can be used. The latter initializes <code>NVMCTRL_CTRLB.FLMAP</code>
	in the startup code and according to the value
	of&nbsp;<code>__flmap</code> resp.
	<code>__RODATA_FLASH_START__</code>.</li>
      <li>When AVR-LibC with&nbsp;#931 is used, then defining symbol
	<code>__flmap_lock</code> to a non-zero value will set bit
	<code>NVMCTRL_CTRLB.FLMAPLOCK</code>. This will protect
	<code>NVMCTRL_CTRLB.FLMAP</code> from any further changes &mdash;
	which would be Undefined Behaviour in C/C++. If you prefer to define
	the symbol in a C/C++ file, an <code>asm</code> statement
	can be used:<pre>
__asm (".global __flmap_lock"  "\n\t"
       "__flmap_lock = 1");</pre></li>
      <li>When you do not want the code from&nbsp;#931, then define global
	symbol <code>__do_flmap_init</code> and the linker will not pull in
	that code from <code>lib<var>mcu</var>.a</code> any more.</li>
      <li>In order to return to the old placement of read-only data in RAM,
	the new compiler option <code>-mrodata-in-ram</code> can be used.</li>
      <li>Read-only data is located in output section <code>.rodata</code>,
	wheras it is part of <code>.text</code> when located in RAM.</li>
      <li>The feature is only available when the compiler is configured
	with a version of Binutils that implements
	<a href="https://sourceware.org/PR31124">PR31124</a>, which is the
	case for Binutils&nbsp;v2.42 and up.</li>
      <li>The implementation consists of two parts:
	<ol>
	<li>Binutils support new emulations <code>avrxmega2_flmap</code> and
	  <code>avrxmega4_flmap</code>.  The sole purpose of these emulations
	  is to provide adjusted default linker description files.
	  Apart from that, these emulations behave exactly the same like
	  <code>avrxmega2</code> resp. <code>avrxmega4</code>.</li>
	<li>The compiler uses a
	  <a href="https://gcc.gnu.org/wiki/avr-gcc#spec-files">device-specs</a>
	  file which links the program
	  with <code>-mavrxmega2_flmap</code> or <code>-mavrxmega2</code>
	  depending on <code>-m[no-]rodata-in-ram</code>; and similar
	  for <code>-mavrxmega4[_flmap]</code>.</li>
	</ol>
	This means the feature can be used with older compiler or Binutils
	versions; all what's needed is an adjusted linker script and
	a custom device-specs file.
      </li>
    </ul>
  </li>
  <li>A new compiler option <code>-m[no-]rodata-in-ram</code> has been added.
    The default is to locate read-only data in program memory for devices that
    support it, e.g. for AVR64* and AVR128* devices as explained above,
    and for devices from the
    <a href="https://gcc.gnu.org/onlinedocs/gcc/AVR-Options.html#avrxmega3">avrxmega3</a>
    and
    <a href="https://gcc.gnu.org/onlinedocs/gcc/AVR-Options.html#avrtiny">avrtiny</a> families.
  </li>
  <li>The new built-in macro <code>__AVR_RODATA_IN_RAM__</code> is supported
    on all devices. It's defined to  <code>0</code> or <code>1</code>.
  </li>
  <li>
    A new optimization tries to improve code generation for indirect memory
    accesses on
     <a href="https://gcc.gnu.org/onlinedocs/gcc/AVR-Options.html#avrtiny"
	>Reduced Tiny devices</a>.
     It can be controlled by the new compiler option
     <code>-mfuse-add=<var>level</var></code> where <var>level</var>
     may be 0, 1 or&nbsp;2.
  </li>
  <li>
    On the Reduced Tiny devices,
    the meaning of register constraint&nbsp;<code>"w"</code> has been changed.
    It containts now the registers R24&hellip;R31 like it is the case for all
    the other devices.
  </li>
</ul>

<h3 id="x86">IA-32/x86-64</h3>
<ul>
  <li>New compiler option <code>-m[no-]evex512</code> was added.
      The compiler switch enables/disables 512-bit vector.
      It will be default on if AVX512F is enabled.
  </li>
  <li>Part of new feature support for Intel APX was added, including EGPR,
      NDD, PPX and PUSH2POP2. APX support is available via the
      <code>-mapxf</code> compiler switch.
  </li>
  <li>For inline asm support with APX, by default the EGPR feature was
      disabled to prevent potential illegal instruction with EGPR occurs.
      To invoke egpr usage in inline asm, use new compiler option
      <code>-mapx-inline-asm-use-gpr32</code> and user should ensure the
      instruction supports EGPR.
  </li>
  <li>New ISA extension support for Intel AVX10.1 was added.
      AVX10.1 intrinsics are available via the <code>-mavx10.1</code> or
      <code>-mavx10.1-256</code> compiler switch with 256-bit vector size
      support. 512-bit vector size support for AVX10.1 intrinsics are
      available via the <code>-mavx10.1-512</code> compiler switch.
  </li>
  <li>New ISA extension support for Intel AVX-VNNI-INT16 was added.
      AVX-VNNI-INT16 intrinsics are available via the <code>-mavxvnniint16</code>
      compiler switch.
  </li>
  <li>New ISA extension support for Intel SHA512 was added.
      SHA512 intrinsics are available via the <code>-msha512</code>
      compiler switch.
  </li>
  <li>New ISA extension support for Intel SM3 was added.
      SM3 intrinsics are available via the <code>-msm3</code>
      compiler switch.
  </li>
  <li>New ISA extension support for Intel SM4 was added.
      SM4 intrinsics are available via the <code>-msm4</code>
      compiler switch.
  </li>
  <li>New ISA extension support for Intel USER_MSR was added.
      USER_MSR intrinsics are available via the <code>-muser_msr</code>
      compiler switch.
  </li>
  <li>GCC now supports the Intel CPU named Clearwater Forest through
    <code>-march=clearwaterforest</code>.
    Based on Sierra Forest, the switch further enables the AVX-VNNI-INT16,
    PREFETCHI, SHA512, SM3, SM4 and USER_MSR ISA extensions.
  </li>
  <li>GCC now supports the Intel CPU named Arrow Lake through
    <code>-march=arrowlake</code>.
    Based on Alder Lake, the switch further enables the AVX-IFMA,
    AVX-NE-CONVERT, AVX-VNNI-INT8 and CMPccXADD ISA extensions.
  </li>
  <li>GCC now supports the Intel CPU named Arrow Lake S through
    <code>-march=arrowlake-s</code>.
    Based on Arrow Lake, the switch further enables the AVX-VNNI-INT16, SHA512,
    SM3 and SM4 ISA extensions.
  </li>
  <li>GCC now supports the Intel CPU named Lunar Lake through
    <code>-march=lunarlake</code>.
    Lunar Lake is based on Arrow Lake S.
  </li>
  <li>GCC now supports the Intel CPU named Panther Lake through
    <code>-march=pantherlake</code>.
    Based on Arrow Lake S, the switch further enables the PREFETCHI ISA
    extensions.
  </li>
  <li>Xeon Phi CPUs support (a.k.a. Knight Landing and Knight Mill) are marked
    as deprecated. GCC will emit a warning when using the
    <code>-mavx5124fmaps</code>, <code>-mavx5124vnniw</code>,
    <code>-mavx512er</code>, <code>-mavx512pf</code>,
    <code>-mprefetchwt1</code>, <code>-march=knl</code>,
    <code>-march=knm</code>, <code>-mtune=knl</code> or <code>-mtune=knm</code>
    compiler switches. Support will be removed in GCC 15.
  </li>
  <li><a href="https://gcc.gnu.org/gcc-11/changes.html">Hardware-assisted
    AddressSanitizer</a> now works for the x86-64 target with LAM_U57.
    <code>-fsanitize=hwaddress</code> will enable <code>-mlam=u57</code>
    by default.
  </li>
</ul>

<!-- <h3 id="mcore">MCore</h3> -->
<ul>
  <li>Bitfields are now signed by default per GCC policy.  If you need bitfields
    to be unsigned, use <code>-funsigned-bitfields</code>.
  </li>
</ul>

<!-- <h3 id="mips">MIPS</h3> -->

<!-- <h3 id="mep">MeP</h3> -->

<!-- <h3 id="msp430">MSP430</h3> -->

<!-- <h3 id="nds32">NDS32</h3> -->

<!-- <h3 id="nios2">Nios II</h3> -->

<!-- <h3 id="nvptx">NVPTX</h3> -->

<!-- <h3 id="hppa">PA-RISC</h3> -->

<!-- <h3 id="powerpc">PowerPC / PowerPC64 / RS6000</h3> -->

<!-- <h3 id="s390">S/390, System z, IBM z Systems</h3> -->

<!-- <h3 id="riscv">RISC-V</h3> -->

<!-- <h3 id="rx">RX</h3> -->

<!-- <h3 id="sh">SH</h3> -->

<!-- <h3 id="sparc">SPARC</h3> -->

<!-- <h3 id="Tile">Tile</h3> -->

<!-- .................................................................. -->
<h2 id="os">Operating Systems</h2>

<!-- <h3 id="aix">AIX</h3> -->

<!-- <h3 id="fuchsia">Fuchsia</h3> -->

<!-- <h3 id="dragonfly">DragonFly BSD</h3> -->

<!-- <h3 id="freebsd">FreeBSD</h3> -->

<!-- <h3 id="gnulinux">GNU/Linux</h3> -->

<!-- <h3 id="rtems">RTEMS</h3> -->

<!-- <h3 id="solaris">Solaris</h3> -->

<!-- <h3 id="vxmils">VxWorks MILS</h3> -->

<!-- <h3 id="windows">Windows</h3> -->


<!-- .................................................................. -->
<h2>Documentation improvements</h2>
<ul>
  <li>
    <!-- commit r14-7106-gbe2bf5dc93ca1e -->
    <!-- commit r14-6923-g4ded42c2c5a5c9 -->
    <!-- commit r14-6922-g6ecc1e32353e33 -->
    <!-- commit r14-6920-g9e49746da303b8 -->
    <!-- commit r14-5118-gc5db4d8ba5f3de -->
    GCC's ability to provide clickable hyperlinks to the documentation
    has been extended, so that whenever GCC refers to a command-line
    option in quotes in a diagnostic message, the option is a clickable
    hyperlink (assuming a suitably capable terminal).
  </li>
</ul>

<!-- .................................................................. -->
<!-- <h2 id="plugins">Improvements for plugin authors</h2> -->

<!-- .................................................................. -->
<h2>Other significant improvements</h2>

<!-- <h3 id="uninitialized">Eliminating uninitialized variables</h3> -->

<!-- .................................................................. -->
<!-- <h2 id="14.1">GCC 14.1</a></h2> -->

</body>
</html>
