<html>

<head>
<title>GCC 4.7 Release Series &mdash; Changes, New Features, and Fixes</title>
</head>

<!-- GCC maintainers, please do not hesitate to update/contribute entries
     concerning those part of GCC you maintain!  2002-03-23, Gerald.
-->

<body>
<h1>GCC 4.7 Release Series<br />Changes, New Features, and Fixes</h1>

<h2>Caveats</h2>

  <ul>
    <li><p>Support for a number of older systems and recently
    unmaintained or untested target ports of GCC has been declared
    obsolete in GCC 4.7.  Unless there is activity to revive them, the
    next release of GCC will have their sources permanently
    <strong>removed</strong>.</p>

    <p id="obsoleted">The following ports for individual systems on
    particular architectures have been obsoleted:</p>

    <ul>
	  <li>Solaris 8 (*-*-solaris2.8).  Details can be found in the
	  <a href="http://gcc.gnu.org/ml/gcc-patches/2011-03/msg01263.html">
	      announcement</a>.</li>
    </ul>

    </li>

    <li>Support has been removed for Unix International threads on Solaris
    2, so the <code>--enable-threads=solaris</code> configure option and
    the <code>-threads</code> compiler option don't work any longer.</li>
  </ul>

<h2>General Optimizer Improvements</h2>

  <ul>
    <li>...</li>
  </ul>

<h2>New Languages and Language specific improvements</h2>

<h3>Ada</h3>

  <ul>
    <li>The command-line option <code>-feliminate-unused-debug-types</code>
      has been re-enabled by default, as it is for the other languages,
      leading to a reduction in debug info size of 12.5% and more for
      relevant cases, as well as to a small compilation speedup.</li>
  </ul>

<h3>C family</h3>

<h3>C++</h3>
  
  <h4>Runtime Library (libstdc++)</h4>

<h3 id="fortran">Fortran</h3>
  <ul>
    <li>The compile flag <a
      href="http://gcc.gnu.org/onlinedocs/gfortran/Code-Gen-Options.html#index-g_t_0040code_007bfstack_002darrays_007d-254";
      ><code>-fstack-arrays</code></a> has been added, which causes
      that all local arrays are put on stack memory. For some
      programs this will improve the performance significantly. If your
      program uses very large local arrays, it is possible that you will
      have to extend your runtime limits for stack memory.</li>
    <li>The <code>-Ofast</code> flag now also implies
      <code>-fno-protect-parens</code> and <code>-fstack-arrays</code>.</li>
    <li>Front-end optimizations can now be selected by the
      <code><a
      href="http://gcc.gnu.org/onlinedocs/gfortran/Code-Gen-Options.html#index-g_t_0040code_007bfrontend_002doptimize_007d-275"
      >-ffrontend-optimize</a></code> option and deselected by
      the <code>-fno-frontend-optimize</code> option.</li>
    <li>When front-end optimization removes a function call,
      <code><a
      href="http://gcc.gnu.org/onlinedocs/gfortran/Error-and-Warning-Options.html#index-g_t_0040code_007bWfunction_002delimination_007d-170"
      >-Wfunction-elimination</a></code> warns about that.</li>
    <li>When performing front-end-optimization, the
      <code><a
      href="http://gcc.gnu.org/onlinedocs/gfortran/Code-Gen-Options.html#index-g_t_0040code_007bfaggressive_002dfunction_002delimination_007d-270">-faggressive-function-elimination</a></code> option
      allows the removal of duplicate function calls even for impure
      functions.</li>
    <li>The flag <code>-Wreal-q-constant</code> has been added, which
      warns if floating-point literals have been specified using
      <code>q</code> (such as <code>1.0q0</code>); the <code>q</code>
      marker is now supported a vendor extension to denote quad precision
      (<code>REAL(16)</code> or, if not available, <code>REAL(10)</code>).
      Consider using a kind parameter (such as in <code>1.0_qp</code>)
      instead, which can be obtained via <a
      href="http://gcc.gnu.org/onlinedocs/gfortran/SELECTED_005fREAL_005fKIND.html";
      ><code>SELECTED_REAL_KIND</code></a>.</li>
    <li>The <code>GFORTRAN_USE_STDERR</code> environment variable has
      been removed. GNU Fortran now always prints error messages to
      standard error. If you wish to redirect standard error, please
      consult the manual for your OS, shell, batch environment etc.
      as appropriate.</li> 
    <li>The <code>-fdump-core</code> option and
      <code>GFORTRAN_ERROR_DUMPCORE</code> environment variable have
      been removed. When encountering a serious error, gfortran will
      now always abort the program. Whether a core dump is generated
      depends on the user environment settings; see for POSIX shells
      the <code>ulimit -c</code> and for C shells the <code>limit
      coredumpsize</code> setting, and see the <a
      "http://msdn.microsoft.com/en-us/library/bb787181%28v=vs.85%29.aspx";
      >WER user-mode dumps settings</a> on Windows.</li>
    <li>Fortran 2008:
      <ul>
        <li>The <a href="http://gcc.gnu.org/wiki/Coarray">coarray</a>
          support has been extended. In particular, an experimental,
          MPI-based <a href="http://gcc.gnu.org/wiki/CoarrayLib">
          coarray communication library</a> has been added.</li>
      </ul></li>
    <li>TR 29113:
      <ul>
        <li>New flag <code>-std=f2008tr</code> permits programs
          that are expected to conform to the Fortran 2008 standard
          and the draft technical report (TR) 29113 on Further
          Interoperability of Fortran with C.</li>
        <li>The <code>OPTIONAL</code> attribute is now allowed
          for dummy arguments of <code>BIND(C)</code> procedures.</li> 
      </ul></li>
  </ul>

<h3>Java (GCJ)</h3>

<h2 id="targets">New Targets and Target Specific Improvements</h2>

<h3>IA-32/x86-64</h3>
  <ul>
    <li>...</li>
  </ul>

<h3>PowerPC/PowerPC64</h3>
  <ul>
    <li>Vectors of type <i>vector long long</i> or <i>vector long</i> are
       passed and returned in the same method as other vectors with the VSX
       instruction set.  Previously the GCC compiler did not adhere to the ABI
       for 128-bit vectors with 64-bit integer base types (PR 48857).
       This will also be fixed in the GCC 4.6.1 and 4.5.4 releases.</li>
  </ul>

<h3>MIPS</h3>

<h3 id="picochip">picochip</h3>

<h2>Documentation improvements</h2>

<h2>Other significant improvements</h2>

</body>
</html>
