<!DOCTYPE html>
<html lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>GCC 12 Release Series &mdash; Changes, New Features, and Fixes</title>
<link rel="stylesheet" type="text/css" href="https://gcc.gnu.org/gcc.css" />
</head>

<!-- GCC maintainers, please do not hesitate to contribute/update
     entries concerning those part of GCC you maintain!
-->

<body>
<h1>GCC 12 Release Series<br/>Changes, New Features, and Fixes</h1>

<p>
This page is a "brief" summary of some of the huge number of improvements
in GCC 12.
You may also want to check out our
<a href="porting_to.html">Porting to GCC 12</a> page and the
<a href="../onlinedocs/index.html#current">full GCC documentation</a>.
</p>

<p>Note: GCC 12 has not been released yet, so this document is
a work-in-progress.</p>

<!-- .................................................................. -->
<h2>Caveats</h2>
<ul>
  <li>
    <strong>C:</strong>
    Computed gotos require a pointer type now.
  </li>
  <li>
    <strong>C++:</strong>
    Two non-standard <code>std::pair</code> constructors have been deprecated.
    These allowed the use of an rvalue and a literal <code>0</code> to
    construct a pair containing a move-only type and a pointer.
    The <code>nullptr</code> keyword should be used to initialize the pointer
    member instead of a literal <code>0</code>, as this is portable to other
    C++ implementations.
  </li>
  <li>
    <strong>Fortran:</strong>
    OpenMP code using the <code>omp_lib.h</code> include file can no longer be
    compiled with <code>-std=f95</code> but now requires at least
    <code>-std=f2003</code>. Alternatively, use the <code>omp_lib</code> module,
    which still supports <code>-std=f95</code> and is recommended to be used
    instead in general.
  </li>
  <li>
    The <code>cr16</code> target with the <code>cr16-*-*</code> configuration
    has been obsoleted and will be removed in a future release.
  </li>
  <li>
    The <code>hppa[12]*-*-hpux10*</code> and <code>hppa[12]*-*-hpux11*</code>
    configurations targeting 32-bit PA-RISC with HP-UX have been obsoleted and
    will be removed in a future release.
  <li>
    The support for the <code>m32r-*-linux*</code>, <code>m32rle-*-linux*</code>,
    <code>m68k*-*-openbsd*</code> and <code>vax-*-openbsd*</code> configurations
    has been removed.
  </li>
  <li>
    <strong>STABS:</strong>
    Support for emitting the STABS debugging format is deprecated and will
    be removed in the next release.  All ports now default to emit DWARF
    (version 2 or later) debugging info or are obsoleted.
  </li>
</ul>


<!-- .................................................................. -->
<h2 id="general">General Improvements</h2>

<ul>
  <li>Vectorization is enabled at <code>-O2</code> which is now equivalent to the
      original <code>-O2 -ftree-vectorize -fvect-cost-model=very-cheap</code>.
      Note that default vectorizer cost model has been changed which used to behave
      as <code>-fvect-cost-model=cheap</code> were specified.
  </li>
</ul>

<!-- .................................................................. -->
<h2 id="languages">New Languages and Language specific improvements</h2>

<ul>
  <li>OpenMP
  <ul>
    <li>OpenMP 5.0 support has been extended: The <code>close</code> map
      modifier and the <code>affinity</code> clause are now supported.
      In addition Fortran gained additionally the following features which were
      available in C and C++ before: <code>declare variant</code> is now
      available, <code>depobj</code>, <code>mutexinoutset</code> and
      <code>iterator</code> can now also be used with the <code>depend</code>
      clause, <code>defaultmap</code> has been updated for OpenMP 5.0, and the
      <code>loop</code> directive and combined directives involving the
      <code>master</code> directive have been added.</li>
    <li>The following OpenMP 5.1 features have been added: support for
      expressing OpenMP directives as C++ 11 attributes, the <code>masked</code>
      and <code>scope</code> construct, the <code>nothing</code> and
      <code>error</code> directives, and using <code>primary</code> with the
      <code>proc_bind</code> clause and <code>OMP_PROC_BIND</code> environment
      variable, the <code>reproducible</code> and <code>unconstrained</code>
      modifiers to the <code>order</code> clause, and, for C/C++ only, the
      <code>align</code> and <code>allocate</code> modifiers to the
      <code>allocate</code> clause and the <code>atomic</code> extensions are
      now available. The <code>OMP_PLACE</code> environment variable supports
      the OpenMP 5.1 features. In addition the <code>OMP_NUM_TEAMS</code> and
      <code>OMP_TEAMS_THREAD_LIMIT</code> environment variables and their
      associated API routines are now supported as well as the memory-allocation
      routines added for Fortran and extended for C/C++ in OpenMP 5.1. In
      Fortran code, strictly structured blocks can be used.</li>
    <li>The <a
      href="https://gcc.gnu.org/onlinedocs/libgomp/OpenMP-Implementation-Status.html"
      >OpenMP Implementation Status</a> can be found in the libgomp manual.</li>
  </ul>
  </li>
  <li>The new warning flag <code>-Wopenacc-parallelism</code> was added for
      OpenACC. It warns about potentially suboptimal choices related to
      OpenACC parallelism.
  </li>
  <li>The offload target code generation for OpenMP and OpenACC can now
      be better adjusted using the new <a
      href="https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-foffload-options"
      ><code>-foffload-options=</code></a> flag and the pre-existing but now
      documented <a
      href="https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-foffload"
      ><code>-foffload=</code></a> flag.
  </li>
</ul>

<!-- <h3 id="ada">Ada</h3> -->

<!-- <h3 id="brig">BRIG (HSAIL)</h3> -->

<h3 id="c-family">C family</h3>

<ul>
  <li>Support for <code>__builtin_shufflevector</code> compatible with
      the clang language extension was added.
  </li>
  <li>The <code>-Wattributes</code> option has been extended so that it's
      possible to use <code>-Wno-attributes=ns::attr</code> or
      <code>-Wno-attributes=ns::</code> to suppress warnings about unknown scoped
      attributes (in C++11 and C2X).  Similarly,
      <code>#pragma GCC diagnostic ignored_attributes "vendor::attr"</code> can
      be used to achieve the same effect.</li>
</ul>

<h3 id="cxx">C++</h3>
<ul>
  <li>Several C++23 features have been implemented:
    <ul>
      <li>P1938R3, <code>if consteval</code></li>
      <li>DR 2397, <code>auto</code> specifier for pointers and references to arrays</li>
    </ul>
  </li>
  <li>Several C++ Defect Reports have been resolved, e.g.:
    <ul>
      <li>DR 1227, Mixing immediate and non-immediate contexts in deduction failure</li>
      <li>DR 2397, <code>auto</code> specifier for pointers and references to arrays</li>
    </ul>
  </li>
</ul>

<!-- <h4 id="libstdcxx">Runtime Library (libstdc++)</h4> -->

<!-- <h3 id="d">D</h3> -->

<h3 id="fortran">Fortran</h3>
<ul>
  <li>WG5/N1942, "TS 29113 Further Interoperability of Fortran with C",
    is now fully supported.  In addition to implementing previously
    missing functionality, such as support for character arguments of
    length greater than one in functions marked <code>bind(c)</code>
    and gaps in the handling for assumed-rank arrays, numerous other bugs
    have been fixed, and an extensive set of new conformance test cases
    has been added.
  </li>
  <li>
    GCC 12 now uses <code>OPERATION</code> as the name of the function to
    the <code>CO_REDUCE</code> intrinsic for the pairwise reduction, thus
    conforming to the Fortran 2018 standard.  Previous versions
    used <code>OPERATOR</code>, which conformed to TS 18508.
  </li>
</ul>

<!-- <h3 id="go">Go</h3> -->

<!-- .................................................................. -->
<!-- <h2 id="jit">libgccjit</h2> -->

<!-- .................................................................. -->
<h2 id="targets">New Targets and Target Specific Improvements</h2>

<!-- <h3 id="aarch64">AArch64</h3> -->

<h3 id="amdgcn">AMD Radeon (GCN)</h3>
<ul>
  <li>Debug experience with ROCGDB has been improved.</li>
  <li>Support for the type <code>__int128_t</code>/<code>integer(kind=16)</code>
      was added.</li>
</ul>

<!-- <h3 id="arc">ARC</h3> -->

<!-- <h3 id="arm">ARM</h3> -->

<!-- <h3 id="avr">AVR</h3> -->

<h3 id="bpf">BPF</h3>
<ul>
  <li>Support for CO-RE (compile-once, run-everywhere) has been added
      to the BPF backend.  CO-RE allows to compile portable BPF
      programs that are able to run among different versions of the
      Linux kernel.
  </li>
</ul>

<h3 id="x86">IA-32/x86-64</h3>
<ul>
  <li>New ISA extension support for Intel AVX512-FP16 was added.
      AVX512FP16 intrinsics are available via the <code>-mavx512fp16</code>
      compiler switch.
  </li>
  <li>For both C and C++ the <code>_Float16</code> type is supported on
      x86 systems with SSE2 enabled. Without <code>{-mavx512fp16}</code>,
      all operations will be emulated in software and <code>float</code>
      instructions.
  </li>
</ul>

<!-- <h3 id="mips">MIPS</h3> -->

<!-- <h3 id="mep">MeP</h3> -->

<!-- <h3 id="msp430">MSP430</h3> -->

<!-- <h3 id="nds32">NDS32</h3> -->

<!-- <h3 id="nios2">Nios II</h3> -->

<h3 id="nvptx">NVPTX</h3>
<ul>
  <li>The <code>-mptx</code> flag has been added to specify the PTX ISA version
      for the generated code; permitted values are <code>3.1</code>
      (default, matches previous GCC versions) and <code>6.3</code>.
  </li>
  <li>The new <code>__PTX_SM__</code> predefined macro allows code to check the
      compute model being targeted by the compiler.</li>
</ul>
<!-- <h3 id="hppa">PA-RISC</h3> -->

<!-- <h3 id="powerpc">PowerPC / PowerPC64 / RS6000</h3> -->

<h3 id="pru">PRU</h3>
<ul>
  <li>The <a
      href="https://gcc.gnu.org/onlinedocs/gcc/Named-Address-Spaces.html#PRU-Named-Address-Spaces"
      ><code>__regio_symbol</code></a> variable qualifier has been added.
      It allows easier access in C programs to the <code>__R30</code> and
      <code>__R31</code> CPU I/O registers.
  </li>
</ul>
<!-- <h3 id="s390">S/390, System z, IBM z Systems</h3> -->

<!-- <h3 id="riscv">RISC-V</h3> -->

<!-- <h3 id="rx">RX</h3> -->

<!-- <h3 id="sh">SH</h3> -->

<!-- <h3 id="sparc">SPARC</h3> -->

<!-- <h3 id="Tile">Tile</h3> -->

<!-- .................................................................. -->
<h2 id="os">Operating Systems</h2>

<!-- <h3 id="aix">AIX</h3> -->

<!-- <h3 id="fuchsia">Fuchsia</h3> -->

<!-- <h3 id="dragonfly">DragonFly BSD</h3> -->

<!-- <h3 id="freebsd">FreeBSD</h3> -->

<!-- <h3 id="gnulinux">GNU/Linux</h3> -->

<!-- <h3 id="rtems">RTEMS</h3> -->

<!-- <h3 id="solaris">Solaris</h3> -->

<!-- <h3 id="vxmils">VxWorks MILS</h3> -->

<!-- <h3 id="windows">Windows</h3> -->


<!-- .................................................................. -->
<!-- <h2>Documentation improvements</h2> -->


<!-- .................................................................. -->
<!-- <h2 id="plugins">Improvements for plugin authors</h2> -->

<!-- .................................................................. -->
<h2>Other significant improvements</h2>

<h3 id="uninitialized">Eliminating uninitialized variables</h3>

<ul>
  <li>GCC can now initialize all stack variables implicitly, including
      padding. This is intended to eliminate all classes of uninitialized
      stack variable flaws. Lack of explicit initialization will still
      warn when <code>-Wuninitialized</code> is active. For best
      debugging, use of the new command-line option
      <code>-ftrivial-auto-var-init=pattern</code> can be used to fill
      variables with a repeated <code>0xFE</code> pattern, which tends to
      illuminate many bugs (e.g. pointers receive invalid addresses, sizes
      and indices are very large). For best production results, the new
      command-line option <code>-ftrivial-auto-var-init=zero</code> can be
      used to fill variables with <code>0x00</code>, which tends to provide
      a safer state for bugs (e.g. pointers are <code>NULL</code>, strings
      are <code>NUL</code> filled, and sizes and indices are <code>0</code>).
  </li>
</ul>

<h3 id="debug">Debugging formats</h3>

<ul>
  <li>GCC can now generate debugging information
      in <a href="https://ctfstd.org">CTF</a>, a lightweight debugging
      format that provides information about C types and the
      association between functions and data symbols and types.  This
      format is designed to be embedded in ELF files and to be very
      compact and simple.  A new command-line
      option <code>-gctf</code> enables the generation of CTF.
  </li>
  <li>GCC can now generate debugging information in BTF.  This is a
      debugging format mainly used in BPF programs and the Linux
      kernel.  The compiler can generate BTF for any target, when
      enabled with the command-line option <code>-gbtf</code>
  </li>
</ul>


<!-- .................................................................. -->
<!-- <h2><a name="12.1">GCC 12.1</a></h2> -->

</body>
</html>
