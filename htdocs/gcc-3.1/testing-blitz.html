<html>

<head>
<title>Blitz++ build and test guide</title>
</head>

<body>
<h1>Blitz++ build and test guide</h1>

<p>This page is a guide to building the Blitz++ scientific computing class
library as part of GCC integration testing.</p>

<h2>Resource usage</h2>

<p>The Blitz++ distribution, available at
<a href="http://www.oonumerics.org/blitz/download/snapshots/blitz-20001213.tar.gz">
blitz-20001213.tar.gz</a>,
is a 0.7 MB file.  The uncompressed distribution
comprises 4.6 MB of source files.  Building and running the
test suite adds between 90 and 125 MB of object files
and executables to this, and building the Blitz++ example programs
adds lots more.</p>

<p>Building and running the Blitz++ test suite on a 750 Mhz
Pentium III laptop takes 13 minutes.  Building the Blitz++ example
programs takes a lot of additional time.</p>

<h2>Prepare</h2>

<p>To prepare the Blitz++ distribution, perform the following:</p>
<ul>
<li>Unpack the file:
    <ul>
    <li><code>tar zxf blitz-20001213.tar.gz</code>, or</li>
    <li><code>gunzip -c blitz-20001213.tar.gz | tar xf -</code></li>
    </ul>
</li>
<li>Change to the new directory:
    <ul>
    <li><code>cd blitz-20001213</code></li>
    </ul>
</li>
</ul>

<h2>Configure</h2>

<p>You can use the simplest form of configuration if the directory
containing the compiler under test is in your <code>PATH</code> variable
and the directory containing the C++ libraries to test is in
<code>LD_LIBRARY_PATH</code>:</p>

<pre><code>./configure --prefix=`pwd` --with-cxx=gcc
</code></pre>

<p>To specify optimizations (by default Blitz++ is built using no
optimization flags) and to specify the full pathname of the compiler
and the location of the library, configure with:</p>

<pre><code>GCC_INST=directory/where/you/installed/GCC
LDFLAGS="-Wl,-rpath=${GCC_INST}/lib" \
./configure --prefix=`pwd` \
    --with-cxx="gcc:${GCC_INST}/bin/g++ &lt;optimization_flags&gt;" 
</code></pre>

<h2>Testing</h2>

<p>To build and run the Blitz++ tests, do:</p>

<pre><code>make check</code></pre>

<p>The output of <code>make check</code> should include the line
"All tests passed."  Failure to build a test prevents the rest of the
tests from being built and any of the tests from running.  To build and
run an individual test (see the list for <code>SINGLE_TESTS</code> from
<code>testsuite/Makefile</code>), do:</p>

<pre><code>cd testsuite
make &lt;testname&gt;
./&lt;testname&gt; || echo failed
</code></pre>

<p>The Blitz++ distribution also includes examples.  To build the examples
as well as building and running the tests, do <code>make all</code>
instead of <code>make check</code>.</p>

<h2>Timing</h2>

<p>TBD</p>

<h2>Cleanup</h2>

<p>Cleanup (to prepare the directory for a fresh run, e.g.
with another version of the compiler), is done as follows:</p>

<pre><code>make -k clean</code></pre>

</body>
</html>
