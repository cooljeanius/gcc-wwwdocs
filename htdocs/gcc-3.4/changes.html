<html>

<head>
<title>GCC 3.4 Release Series &mdash; Changes, New Features, and Fixes</title>
</head>

<!-- GCC maintainers, please do not hesitate to update/contribute entries
     concerning those part of GCC you maintain!  2002-03-23, Gerald.
-->

<body>
<h1>GCC 3.4 Release Series<br />Changes, New Features, and Fixes</h1>

<h2>Caveats</h2>

  <ul>
    <li>With <code>-nostdinc</code> the preprocessor used to ignore
        both standard include paths <strong>and</strong> include paths
        contained in environment variables.  It was neither documented
        nor intended that environment variable paths be ignored, so
        this has been corrected.</li>
    <li>GCC no longer accepts the options <code>-fvolatile</code>,
	<code>-fvolatile-global</code> and <code>-fvolatile-static</code>.
	It is unlikely that they worked correctly in any 3.x release.</li>
    <li>GCC no longer ships <code>&lt;varargs.h&gt;</code>.  Use
        <code>&lt;stdarg.h&gt;</code> instead.</li>
    <li>Support for all the systems <a
        href="../gcc-3.3/changes.html#obsolete_systems">obsoleted in
        GCC 3.3</a> has been removed from GCC 3.4.  See below for a
        <a href="#obsolete_systems">list of systems which are obsoleted
        in this release</a>.</li>
    <li>GCC now requires an ISO C90 (ANSI C89) C compiler to build.
        K&amp;R C compilers will not work.</li>
  </ul>

<h2>General Optimizer Improvements</h2>

  <ul>
    <li>Usability of the profile feedback and coverage testing has been improved.
    <ul>
      <li>Performance of profiled programs has been improved by faster profile
          merging code.</li>
      <li>Better use of the profile feedback for optimization (loop unrolling
          and loop peeling).</li>
      <li>File locking support allowing <code>fork()</code> calls and parallel
          runs of profiled programs.</li>
      <li><code>make profiledbootstrap</code> available to build a faster
          compiler.</li>
    </ul>
    </li>
  </ul>

  
<h2>New Languages and Language specific improvements</h2>

<h3>C/ObjC/C++</h3>

  <ul>
    <li>Precompiled headers are now supported.  Precompiled headers
        can dramatically speed up compilation of some projects.  There
        are some restrictions; read the manual for the details.</li>
  </ul>

<h3>C++</h3>

  <ul>
    <li>A hand-written recursive-descent C++ parser has replaced the
        YACC-derived C++ parser from previous GCC releases.  The new
        parser contains much improved infrastructure needed for better
        parsing of C++ source codes, handling of extensions, and clean
        separation (where possible) between proper semantics analysis
        and parsing.  The new parser fixes many bugs that were found
        in the old parser.</li>
  </ul>

<h3>Objective-C</h3>

  <ul>
    <li></li>
  </ul>

<h3>Java</h3>

  <ul>
    <li></li>
  </ul>

<h3>Fortran</h3>

  <ul>
    <li>Fortran improvements are listed in              
    <a href="http://gcc.gnu.org/onlinedocs/g77/News.html">
    the Fortran documentation</a>.</li>
  </ul>

<h2>New Targets and Target Specific Improvements</h2>

  <ul>
    <li>Support for the Intel's iWMMXt architecture, a second
    generation XScale processor, has been addded to the ARM port.
    Enabled at run time with the <code>-mcpu=iwmmxt</code> command
    line switch.</li>
    
    <li>A new ARM target has been added: <code>arm-wince-pe</code>.  This is
    similar to the arm-pe target, but it defaults to using the APCS32
    ABI.</li>
    
    <li>The x86 back end has had some noticeable work done to it.
    <ul>
      <li>Tuning for K8 core is available via <code>-march=k8</code> and <code>-mcpu=k8</code></li>
      <li>Scalar SSE code generation carefully avoids reformatting penalties,
          hidden dependencies and minimizes the number of uops generated on
          both Intel and AMD CPUs.</li>
      <li>Conditional jump elimination is now more aggressive on modern CPUs.</li>
      <li>The Athlon and K8 ports have been converted to use the DFA
          processor pipeline description.</li>
      <li>Further small performance improvements.</li>
    </ul></li>
    <li>Support for the SH2E processor has been added to the SH port.
    Enabled at run time with the <code>-m2e</code> command line
    switch, or at configure time by specifying sh2e as the machine
    part of the target triple.</li>
    
    <li>Support for the Cirrus EP9312 Maverick floating point
    co-processor added to the ARM port.  Enabled at run time with the
    <code>-mcpu=ep9312</code> command line switch.  Note however that
    the multilibs to support this chip are currently disabled in
    <code>gcc/config/arm/t-arm-elf</code>, so if you want to enable their
    production you will have to uncomment the entries in that
    file.</li>
  </ul>


<h2><a name="obsolete_systems">Obsolete Systems</a></h2>

  <p>Support for a number of older systems has been declared obsolete in
  GCC 3.4.  Unless there is activity to revive them, the next release of
  GCC will have their sources permanently <strong>removed</strong>.</p>

  <p>All configurations of the following processor architectures have
  been declared obsolete:</p>

  <ul>
    <li></li>
  </ul>

  <p>Also, some individual systems have been obsoleted:</p>

  <ul>
    <li>
      <ul>
	<li>target <code>target-triple</code></li>
      </ul></li>
  </ul>


<h2>Documentation improvements</h2>


<h2>Other significant improvements</h2>

  <ul>
    <li>The build system has undergone several significant cleanups.
        Subdirectories will only be configured if they are being built, 
        and all subdirectory configures are run from the <code>make</code>
        command.  The top level has been autoconfiscated.</li>
    <li>The <code>-W</code> warning option has been renamed to
        <code>-Wextra</code>, which is more easily understood.  The older
        spelling will be retained for backwards compatibility.</li>
    <li>Substantial improvements in compile time have been made, particularly
        for non-optimizing compilations.</li>
  </ul>

</body>
</html>
